(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1696:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(1697);var a=n(0),r=n.n(a);function i(){return r.a.createElement("div",{id:"squareLoading"})}},1697:function(e,t,n){},1737:function(e,t,n){},1800:function(e,t,n){},1890:function(e,t,n){"use strict";n.r(t);var a=n(25),r=n(26),i=n(40),o=n(41),l=(n(1800),n(1333)),c=n(1879),u=n(1882),s=(n(1654),n(0)),p=n.n(s),d=n(280),f=n.n(d),m=n(1688),h=n.n(m),v=n(376),y=n(1665),g=n(15),S=n.n(g),E=n(1),b=n.n(E),P=function(e){var t={params:{month:e.month,year:e.year}};return S.a.get(b.a.API_ENPOINT+"/api/patientInformation/listPatient",t)},k=function(e){var t={params:{month:e.month,year:e.year}};return S.a.get(b.a.API_ENPOINT+"/api/dengue-location-item/listDengueLocationItem",t)},C=(n(1737),function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.onClick;return p.a.createElement("div",{class:"layer_patient"},p.a.createElement("div",{className:"tear_patient",onClick:e}))}}]),n}(s.PureComponent)),I=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.onClick;return p.a.createElement("div",{class:"layer_vector"},p.a.createElement("div",{className:"tear_vector",onClick:e}))}}]),n}(s.PureComponent),w=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.infor,n=e._type;e.onClick;return p.a.createElement("div",null,n," t\u1ea1i"," ",t.address)}}]),n}(s.PureComponent),j=n(1696),F=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setListPatient=function(e){r.setState({listPatient:e})},r.setListVector=function(e){r.setState({listVector:e})},r.listPatientError=function(){r.setState({loading:!1,listPatient:[]})},r.listVectorError=function(){r.setState({loading:!1,listVector:[]})},r.pinAboutPatientAndVector=function(){r.setState({loading:!0});var e={},t=r.setListPatient,n=r.setListVector,a=r.listPatientError,i=r.listVectorError;e.year=f()(r.state.selectedMonth).format("yyyy"),e.month=f()(r.state.selectedMonth).format("MM"),P(e).then(function(e){var n=e.data;t(n),r.setState({loading:!1})}).catch(function(e){return a(),Promise.reject(e)}),k(e).then(function(e){var t=e.data;r.setState({loading:!1}),n(t)}).catch(function(e){return i(),Promise.reject(e)})},r.onClosePopup=function(){r.setState({showPopup:!1})},r.handleDateChange=function(e){r.setState({selectedMonth:e},function(){return r.pinAboutPatientAndVector()})},r.viewFullScreen=function(){var e=document.getElementById("map-wrapper");e.requestFullscreen?(e.requestFullscreen(),r.setState({fullScreen:!0})):e.webkitRequestFullscreen?(e.webkitRequestFullscreen(),r.setState({fullScreen:!0})):e.msRequestFullscreen&&(e.msRequestFullscreen(),r.setState({fullScreen:!0}))},r.exitFullScreen=function(){window.document.exitFullscreen().then(function(e){return console.log(e)}),r.setState({fullScreen:!1})},r.state={viewport:{longitude:105.7933994,latitude:21.0282951,zoom:14},longitude:105.7926785,latitude:21.0283643,selectedMonth:new Date,fullScreen:!1,listPatient:[],listVector:[],patientInfor:null,vectorInfor:null,loading:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.pinAboutPatientAndVector()}},{key:"Patient_renderPopup",value:function(){var e=this,t=this.state.patientInfor;return t&&p.a.createElement(y.e,{tipSize:5,anchor:"top",longitude:parseFloat(t.longitude),latitude:parseFloat(t.latitude),closeOnClick:!1,onClose:function(){return e.setState({patientInfor:null})}},p.a.createElement(w,{infor:t,_type:"Ca b\u1ec7nh"}))}},{key:"Vector_renderPopup",value:function(){var e=this,t=this.state.vectorInfor;return t&&p.a.createElement(y.e,{tipSize:5,anchor:"top",longitude:parseFloat(t.longitude),latitude:parseFloat(t.latitude),closeOnClick:!1,onClose:function(){return e.setState({vectorInfor:null})}},p.a.createElement(w,{infor:t,_type:"Vector truy\u1ec1n b\u1ec7nh"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.viewport,a=t.selectedMonth,r=t.fullScreen,i=t.listPatient,o=t.listVector,s=t.loading,d=this.props.t,f=i.map(function(t){return p.a.createElement(y.c,{key:t.name,longitude:parseFloat(t.longitude),latitude:parseFloat(t.latitude)},p.a.createElement(C,{onClick:function(){return e.setState({patientInfor:t})}}))}),m=o.map(function(t){return p.a.createElement(y.c,{key:t.name,longitude:parseFloat(t.longitude),latitude:parseFloat(t.latitude)},p.a.createElement(I,{onClick:function(){return e.setState({vectorInfor:t})}}))});return p.a.createElement("div",{className:"flex",id:"map-wrapper"},p.a.createElement(v.Helmet,null,p.a.createElement("title",null,"B\u1ea3n \u0111\u1ed3 \u0111i\u1ec1u tra SXH"," | ","Facility Service")),p.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",zIndex:"999",backgroundColor:"#fff",height:"25vh",padding:"30px 20px 20px 20px",margin:"5px",display:"flex",borderRadius:"10px",flexDirection:"column"}},p.a.createElement(h.a,{onChange:function(t){return e.handleDateChange(t)},value:a,locale:"vi-VN",format:"M/yyyy",maxDetail:"year",closeCalendar:!0,clearIcon:null,calendarClassName:"month-picker",calendarIcon:p.a.createElement(c.a,null)}),p.a.createElement(l.a,{onClick:!0===r?this.exitFullScreen:this.viewFullScreen,color:r?"secondary":"primary",variant:"contained",className:"mt-20",startIcon:p.a.createElement(u.a,null)},d(!0===r?"exitFullScreen":"fullScreen"))),p.a.createElement("div",{style:{width:"60vw",height:"100vh",flex:"1",position:"relative"}},s&&p.a.createElement(j.a,null),p.a.createElement(y.f,Object.assign({},n,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxApiAccessToken:"pk.eyJ1IjoibWVvMTIzIiwiYSI6ImNrdTI2MTQzZzBoNzMyd3FrNWVpc3U1YjEifQ.zj-vYL4EgQI83LzH8w8n6g",onViewportChange:function(t){return e.setState({viewport:t})},attributionControl:!1,onClick:this.onMapClick,transitionDuration:150,transitionInterpolator:new y.a,onLoad:function(){return e.setState({loading:!1})}}),f,m,this.Patient_renderPopup(),this.Vector_renderPopup(),p.a.createElement(y.d,{style:{top:10,right:10}}))))}}]),n}(s.PureComponent);t.default=F}}]);
//# sourceMappingURL=38.d466239f.chunk.js.map