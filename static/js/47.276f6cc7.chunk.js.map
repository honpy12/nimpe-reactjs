{"version":3,"sources":["app/views/Component/ValidateSelect/ValidatePicker.jsx","app/views/page-layouts/UserProfileService.js","app/views/page-layouts/ChangePasswordPopup.jsx","app/views/page-layouts/UploadCropImagePopup.jsx","app/views/page-layouts/UserProfile.jsx"],"names":["ValidatedDatePicker","_this$props","this","props","helperText","errorMessages","validators","requiredError","rest","validatorListener","Object","D_OceanTech_nimpe_Client_V2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_excluded","isValid","state","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","_material_ui_pickers__WEBPACK_IMPORTED_MODULE_6__","utils","DateFnsUtils","locale","viLocale","_material_ui_pickers__WEBPACK_IMPORTED_MODULE_7__","assign","error","getErrorMessage","ValidatorComponent","API_USER","ConstantList","API_ENPOINT","getCurrentUser","url","axios","get","updateProfile","user","put","changePassword","updateUserAvatar","data","post","Content-Type","PaperComponent","react_default","cjs_default","handle","cancel","Paper","ChangePasswordPopup","oldPassword","password","confirmPassword","handleChangePassword","_this","then","toast","success","setTimeout","JwtAuthService","logout","catch","handleClose","handleChange","name","event","setState","defineProperty","target","value","_this2","ValidatorForm","addValidationRule","objectSpread2","_this3","t","open","Dialog","onClose","PaperProps","style","width","maxHeight","alignContent","maxWidth","fullWidth","DialogTitle","cursor","id","lib","ref","onSubmit","DialogContent","dividers","Grid","container","spacing","item","md","sm","xs","FormControl","margin","label","color","className","type","onChange","DialogActions","Button","variant","onClick","Component","UploadCropImagePopup","dragClass","files","statusList","isEmpty","src","crop","unit","height","blobValue","contentType","onImageLoaded","image","imageRef","onCropComplete","makeClientCrop","onCropChange","handleFileUploadOnSelect","e","length","reader","FileReader","addEventListener","result","readAsDataURL","handleFileSelect","handleDragOver","preventDefault","handleDrop","persist","dataTransfer","handleDragStart","handleSingleRemove","index","toConsumableArray","splice","handleAllRemove","uploadSingleFile","allFiles","file","fileUpload","alert","window","location","reload","uploading","uploadAllFile","map","push","concat","queProgress","handleSingleCancel","fileUploadBlob","formData","FormData","set","headers","response","_callee","croppedImageUrl","regenerator_default","wrap","_context","prev","next","getCroppedImg","sent","stop","fileName","canvas","document","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","x","y","Promise","resolve","toBlob","blob","URL","revokeObjectURL","fileUrl","createObjectURL","console","uploadUrl","append","handleUpdate","_this$state","onDragEnter","onDragOver","onDrop","htmlFor","size","component","Icon","accept","ReactCrop_min_default","onComplete","startIcon","Block","Save","React","API_PATH","UserProfile","person","shouldOpenImageDialog","shouldOpenPasswordDialog","isUpdate","toggleSidenav","handleWindowResize","innerWidth","mobile","handleOpenUploadDialog","handleDialogClose","handleOpenPasswordDialog","handleDialogPasswordClose","openPasswordDialog","authService","setLoginUser","handleUserChange","handlePersonChange","handleDateChange","date","birthDate","handleFormSubmit","_ref","windowResizeListener","localStorageService","getLoginUser","removeEventListener","_person$displayName","_person$firstName","_person$lastName","_person$displayName2","_user$username","_person$birthDate","_person$gender","_user$email","_person$birthPlace","i18n","page_layouts_UploadCropImagePopup","acceptType","page_layouts_ChangePasswordPopup","elevation","minHeight","Avatar","imagePath","ROOT_PATH","displayName","alignItems","disabled","firstName","lastName","username","ValidatePicker","disableToolbar","autoOk","format","Date","now","InputLabel","Select","gender","MenuItem","key","email","birthPlace","lg","xl","position","right","withStyles","withTheme"],"mappings":"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","file":"static/js/47.276f6cc7.chunk.js","sourcesContent":["import DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n\tKeyboardDatePicker,\r\n\tMuiPickersUtilsProvider,\r\n} from \"@material-ui/pickers\";\r\nimport React from \"react\";\r\nimport { ValidatorComponent } from \"react-material-ui-form-validator\";\r\nimport viLocale from \"date-fns/locale/vi\";\r\nclass ValidatedDatePicker extends ValidatorComponent {\r\n\trenderValidatorComponent() {\r\n\t\tconst {\r\n\t\t\terrorMessages,\r\n\t\t\tvalidators,\r\n\t\t\trequiredError,\r\n\t\t\thelperText,\r\n\t\t\tvalidatorListener,\r\n\t\t\t...rest\r\n\t\t} = this.props;\r\n\r\n\t\tconst { isValid } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<MuiPickersUtilsProvider utils={DateFnsUtils} locale={viLocale}>\r\n\t\t\t\t<KeyboardDatePicker\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\terror={!isValid}\r\n\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t(!isValid && this.getErrorMessage()) || helperText\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ValidatedDatePicker;\r\n","import axios from \"axios\";\r\nimport ConstantList from \"../../appConfig\";\r\n\r\nconst API_USER = ConstantList.API_ENPOINT + \"/api/users\";\r\n\r\nexport const getCurrentUser = () => {\r\n\tvar url = API_USER + \"/getCurrentUser\";\r\n\treturn axios.get(url);\r\n};\r\n\r\nexport const updateProfile = user => axios.put(API_USER, user);\r\n\r\nexport const changePassword = user =>\r\n\taxios.put(API_USER + \"/password/self\", user);\r\n\r\nexport const updateUserAvatar = data =>\r\n\taxios.post(API_USER + \"/updateavatar\", data, {\r\n\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t});\r\n\r\nexport const getUserAvatar = username =>\r\n\taxios.get(ConstantList.API_ENPOINT + `/public/users/photo/${username}`);\r\n","import {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tGrid,\r\n\tPaper,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tFormControl,\r\n} from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport Draggable from \"react-draggable\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\r\nimport JwtAuthService from \"../../services/jwtAuthService\";\r\nimport { changePassword } from \"./UserProfileService\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction PaperComponent(props) {\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\thandle=\"#draggable-dialog-title\"\r\n\t\t\tcancel={'[class*=\"MuiDialogContent-root\"]'}\r\n\t\t>\r\n\t\t\t<Paper {...props} />\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\nclass ChangePasswordPopup extends Component {\r\n\tstate = {\r\n\t\toldPassword: \"\",\r\n\t\tpassword: \"\",\r\n\t\tconfirmPassword: \"\",\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tValidatorForm.addValidationRule(\"isPasswordMatch\", value => {\r\n\t\t\tif (value !== this.state.password) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tif (this.props.user) {\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.props.user,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleChangePassword = () => {\r\n\t\tchangePassword(this.state)\r\n\t\t\t.then(() => {\r\n\t\t\t\ttoast.success(\"Bạn đã đối mật khẩu thành công\");\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tJwtAuthService.logout();\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\ttoast.error(\"Đã có lỗi khi đổi mật khẩu\");\r\n\t\t\t\tthis.props.handleClose();\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleChange = name => event => {\r\n\t\tthis.setState({\r\n\t\t\t[name]: event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { t, handleClose, open, user } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\topen={open}\r\n\t\t\t\tPaperProps={{\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\twidth: 500,\r\n\t\t\t\t\t\tmaxHeight: 800,\r\n\t\t\t\t\t\talignContent: \"center\",\r\n\t\t\t\t\t\t//backgroundColor: 'Blue',\r\n\t\t\t\t\t\t//color:'black'\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tPaperComponent={PaperComponent}\r\n\t\t\t\tmaxWidth={\"md\"}\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle\r\n\t\t\t\t\tstyle={{ cursor: \"move\" }}\r\n\t\t\t\t\tid=\"draggable-dialog-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{t(\"user.changePass\")}\r\n\t\t\t\t</DialogTitle>\r\n\r\n\t\t\t\t<ValidatorForm\r\n\t\t\t\t\tref=\"form\"\r\n\t\t\t\t\tonSubmit={() => this.handleChangePassword()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t\t<Grid item md={12} sm={12} xs={12}>\r\n\t\t\t\t\t\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t\t\t\t\t\t<TextValidator\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t(\"user.current_password\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tid=\"password-current\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"oldPassword\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.oldPassword}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\"oldPassword\"\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tvalidators={[\"required\"]}\r\n\t\t\t\t\t\t\t\t\t\terrorMessages={[t(\"general.required\")]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t<Grid item md={12} sm={12} xs={12}>\r\n\t\t\t\t\t\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t\t\t\t\t\t<TextValidator\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t(\"user.pass\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tid=\"password-current\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange(\"password\")}\r\n\t\t\t\t\t\t\t\t\t\tvalidators={[\"required\"]}\r\n\t\t\t\t\t\t\t\t\t\terrorMessages={[t(\"general.required\")]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t<Grid item md={12} sm={12} xs={12}>\r\n\t\t\t\t\t\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t\t\t\t\t\t<TextValidator\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t(\"user.re_pass\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tid=\"confirm-password\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"confirmPassword\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.confirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\"confirmPassword\"\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tvalidators={[\r\n\t\t\t\t\t\t\t\t\t\t\t\"required\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"isPasswordMatch\",\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t\terrorMessages={[\r\n\t\t\t\t\t\t\t\t\t\t\tt(\"general.required\"),\r\n\t\t\t\t\t\t\t\t\t\t\tt(\"user.passwordMatchMessage\"),\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</DialogContent>\r\n\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"mr-12 align-bottom\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => handleClose()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"general.cancel\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"mr-16\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"general.update\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</ValidatorForm>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\nexport default ChangePasswordPopup;\r\n","import { Button, Dialog, DialogActions, Icon } from \"@material-ui/core\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport Draggable from \"react-draggable\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport ConstantList from \"../../appConfig\";\r\nimport { Block, Save } from \"@material-ui/icons\";\r\n\r\nfunction PaperComponent(props) {\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\thandle=\"#draggable-dialog-title\"\r\n\t\t\tcancel={'[class*=\"MuiDialogContent-root\"]'}\r\n\t\t>\r\n\t\t\t<Paper {...props} />\r\n\t\t</Draggable>\r\n\t);\r\n}\r\nclass UploadCropImagePopup extends React.Component {\r\n\t// state = {\r\n\t//   dragClass: \"\",\r\n\t//   files: [],\r\n\t//   statusList: [],\r\n\t//   queProgress: 0\r\n\t// };\r\n\r\n\tstate = {\r\n\t\tdragClass: \"\",\r\n\t\tfiles: [],\r\n\t\tstatusList: [],\r\n\t\tisEmpty: true,\r\n\t\tsrc: null,\r\n\t\tcrop: {\r\n\t\t\tunit: \"%\",\r\n\t\t\twidth: 50,\r\n\t\t\theight: 50,\r\n\t\t},\r\n\t\tblobValue: null,\r\n\t\tcontentType: null,\r\n\t};\r\n\t// If you setState the crop in here you should return false.\r\n\tonImageLoaded = image => {\r\n\t\tthis.imageRef = image;\r\n\t};\r\n\r\n\tonCropComplete = crop => {\r\n\t\tthis.makeClientCrop(crop);\r\n\t};\r\n\r\n\tonCropChange = crop => {\r\n\t\tthis.setState({ crop });\r\n\t};\r\n\r\n\tasync makeClientCrop(crop) {\r\n\t\tif (this.imageRef && crop.width && crop.height) {\r\n\t\t\tconst croppedImageUrl = await this.getCroppedImg(\r\n\t\t\t\tthis.imageRef,\r\n\t\t\t\tcrop,\r\n\t\t\t\t\"newFile.jpeg\"\r\n\t\t\t);\r\n\t\t\tthis.setState({ croppedImageUrl });\r\n\t\t}\r\n\t}\r\n\r\n\tgetCroppedImg(image, crop, fileName) {\r\n\t\tconst canvas = document.createElement(\"canvas\");\r\n\t\tconst scaleX = image.naturalWidth / image.width;\r\n\t\tconst scaleY = image.naturalHeight / image.height;\r\n\t\tcanvas.width = crop.width;\r\n\t\tcanvas.height = crop.height;\r\n\t\tconst ctx = canvas.getContext(\"2d\");\r\n\r\n\t\tctx.drawImage(\r\n\t\t\timage,\r\n\t\t\tcrop.x * scaleX,\r\n\t\t\tcrop.y * scaleY,\r\n\t\t\tcrop.width * scaleX,\r\n\t\t\tcrop.height * scaleY,\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\tcrop.width,\r\n\t\t\tcrop.height\r\n\t\t);\r\n\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tcanvas.toBlob(blob => {\r\n\t\t\t\tif (!blob) {\r\n\t\t\t\t\t//reject(new Error('Canvas is empty'));\r\n\t\t\t\t\tconsole.error(\"Canvas is empty\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tblob.name = fileName;\r\n\t\t\t\twindow.URL.revokeObjectURL(this.fileUrl);\r\n\t\t\t\tthis.fileUrl = window.URL.createObjectURL(blob);\r\n\t\t\t\tthis.setState({ blobValue: blob });\r\n\t\t\t\tresolve(this.fileUrl);\r\n\t\t\t}, \"image/jpeg\");\r\n\t\t});\r\n\t}\r\n\thandleFileUploadOnSelect = e => {\r\n\t\tif (e.target.files && e.target.files.length > 0) {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener(\"load\", () =>\r\n\t\t\t\tthis.setState({ src: reader.result })\r\n\t\t\t);\r\n\t\t\treader.readAsDataURL(e.target.files[0]);\r\n\t\t}\r\n\t};\r\n\t// handleFileUploadOnSelect = event => {\r\n\t//   let files = event.target.files;\r\n\t//   this.fileUpload(files[0]).then(res => {\r\n\t//     alert(\"File uploaded successfully.\")\r\n\t//   });\r\n\t// }\r\n\thandleFileSelect = e => {\r\n\t\tif (e.target.files && e.target.files.length > 0) {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener(\"load\", () =>\r\n\t\t\t\tthis.setState({ src: reader.result, isEmpty: false })\r\n\t\t\t);\r\n\t\t\treader.readAsDataURL(e.target.files[0]);\r\n\t\t}\r\n\t\t// let { t } = this.props;\r\n\t\t// let files = event.target.files;\r\n\t\t// let list = [];\r\n\t\t// console.log(files);\r\n\t\t// let acceptType = this.props.acceptType.split(\";\");\r\n\t\t// for (const iterator of files) {\r\n\t\t//   if (iterator.type.split(\"/\").length <= 0 || acceptType.indexOf(iterator.type.split(\"/\")[1]) < 0) {\r\n\t\t//     console.log(acceptType);\r\n\t\t//     console.log(iterator.type.split(\"/\"));\r\n\t\t//     alert(t(\"general.type_not_accepted\"));\r\n\t\t//     break;\r\n\t\t//   }\r\n\t\t//   list.push({\r\n\t\t//     file: iterator,\r\n\t\t//     uploading: false,\r\n\t\t//     error: false,\r\n\t\t//     progress: 0\r\n\t\t//   });\r\n\t\t// }\r\n\r\n\t\t// this.setState({\r\n\t\t//   files: [...list]\r\n\t\t// });\r\n\t};\r\n\r\n\thandleDragOver = event => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.setState({ dragClass: \"drag-shadow\" });\r\n\t};\r\n\thandleDrop = event => {\r\n\t\tevent.preventDefault();\r\n\t\tevent.persist();\r\n\t\tlet files = event.dataTransfer.files;\r\n\t\t// this.fileUpload(files[0]).then(res => {\r\n\t\t//   let url =ConstantList.API_ENPOINT+\"/public/file/downloadbyid/\"+res.data.id;\r\n\t\t//   alert(url);\r\n\t\t//   this.setState({imageUrl:url})\r\n\t\t//   console.log(url);\r\n\t\t//   //alert(\"File uploaded successfully.\")\r\n\t\t// });\r\n\t\tif (files && files.length > 0) {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener(\"load\", () =>\r\n\t\t\t\tthis.setState({ src: reader.result })\r\n\t\t\t);\r\n\t\t\treader.readAsDataURL(files[0]);\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\thandleDragStart = () => {\r\n\t\tthis.setState({ dragClass: \"drag-shadow\" });\r\n\t};\r\n\r\n\thandleSingleRemove = index => {\r\n\t\tlet files = [...this.state.files];\r\n\t\tfiles.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\tfiles: [...files],\r\n\t\t});\r\n\t};\r\n\r\n\thandleAllRemove = () => {\r\n\t\tthis.setState({ files: [] });\r\n\t};\r\n\tfileUpload(file) {\r\n\t\tconst url = this.props.uploadUrl;\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append(\"uploadfile\", file); //Lưu ý tên 'uploadfile' phải trùng với tham số bên Server side\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t},\r\n\t\t};\r\n\t\treturn axios.post(url, formData, config);\r\n\t}\r\n\r\n\tuploadSingleFile = index => {\r\n\t\tlet { t } = this.props;\r\n\t\tlet allFiles = [...this.state.files];\r\n\t\tlet file = this.state.files[index];\r\n\t\tthis.fileUpload(file.file).then(() => {\r\n\t\t\talert(t(\"general.success\"));\r\n\t\t\twindow.location.reload();\r\n\t\t});\r\n\r\n\t\tallFiles[index] = { ...file, uploading: true, error: false };\r\n\r\n\t\tthis.setState({\r\n\t\t\tfiles: [...allFiles],\r\n\t\t});\r\n\t};\r\n\r\n\tuploadAllFile = () => {\r\n\t\tlet allFiles = [];\r\n\r\n\t\tthis.state.files.map(item => {\r\n\t\t\tallFiles.push({\r\n\t\t\t\t...item,\r\n\t\t\t\tuploading: true,\r\n\t\t\t\terror: false,\r\n\t\t\t});\r\n\r\n\t\t\treturn item;\r\n\t\t});\r\n\r\n\t\tthis.setState({\r\n\t\t\tfiles: [...allFiles],\r\n\t\t\tqueProgress: 35,\r\n\t\t});\r\n\t};\r\n\r\n\thandleSingleCancel = index => {\r\n\t\tlet allFiles = [...this.state.files];\r\n\t\tlet file = this.state.files[index];\r\n\r\n\t\tallFiles[index] = { ...file, uploading: false, error: true };\r\n\r\n\t\tthis.setState({\r\n\t\t\tfiles: [...allFiles],\r\n\t\t});\r\n\t};\r\n\tfileUploadBlob = () => {\r\n\t\tconst url = ConstantList.API_ENPOINT + \"/api/users/updateavatar\";\r\n\t\tlet formData = new FormData();\r\n\t\tformData.set(\"uploadfile\", this.state.blobValue);\r\n\t\t//formData.append('uploadfile',file);//Lưu ý tên 'uploadfile' phải trùng với tham số bên Server side\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"image/jpg\",\r\n\t\t\t},\r\n\t\t};\r\n\t\treturn axios.post(url, formData, config).then(response => {\r\n\t\t\tlet user = response.data;\r\n\t\t\tthis.setState({ user: user });\r\n\t\t\t//console.log(user);\r\n\t\t});\r\n\t};\r\n\trender() {\r\n\t\tconst { t, handleClose, open, handleUpdate } = this.props;\r\n\t\tlet { dragClass, files } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\topen={open}\r\n\t\t\t\tPaperProps={{\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\twidth: 500,\r\n\t\t\t\t\t\tmaxHeight: 800,\r\n\t\t\t\t\t\talignContent: \"center\",\r\n\t\t\t\t\t\t//backgroundColor: 'Blue',\r\n\t\t\t\t\t\t//color:'black'\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tPaperComponent={PaperComponent}\r\n\t\t\t\tmaxWidth={\"md\"}\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle\r\n\t\t\t\t\tstyle={{ cursor: \"move\" }}\r\n\t\t\t\t\tid=\"draggable-dialog-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"mb-20\">{t(\"general.upload\")}</span>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<div className=\"upload-form m-sm-30\">\r\n\t\t\t\t\t\t{this.state.isEmpty ? (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={`${dragClass} upload-drop-box flex flex-center flex-middle`}\r\n\t\t\t\t\t\t\t\t\tonDragEnter={this.handleDragStart}\r\n\t\t\t\t\t\t\t\t\tonDragOver={this.handleDragOver}\r\n\t\t\t\t\t\t\t\t\tonDrop={this.handleDrop}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.isEmpty ? (\r\n\t\t\t\t\t\t\t\t\t\t<span>Drop your files here</span>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<h5 className=\"m-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t{files.length} file\r\n\t\t\t\t\t\t\t\t\t\t\t{files.length > 1 ? \"s\" : \"\"}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\tselected...\r\n\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap mb-20\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"upload-single-file\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"capitalize\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-middle\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"pr-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcloud_upload\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Icon>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t(\"general.select_file\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"display-none\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleFileSelect}\r\n\t\t\t\t\t\t\t\t\t\tid=\"upload-single-file\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{this.state.src && (\r\n\t\t\t\t\t\t\t\t\t<ReactCrop\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: \"100%\",\r\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\t\t\t\talignContent: \"center\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tsrc={this.state.src}\r\n\t\t\t\t\t\t\t\t\t\tcrop={this.state.crop}\r\n\t\t\t\t\t\t\t\t\t\tonImageLoaded={this.onImageLoaded}\r\n\t\t\t\t\t\t\t\t\t\tonComplete={this.onCropComplete}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onCropChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-16 mr-16 align-bottom\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tstartIcon={<Block />}\r\n\t\t\t\t\t\tonClick={() => handleClose(this.state.user)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t(\"general.close\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-16 mr-16 align-bottom\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tstartIcon={<Save />}\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={() => handleUpdate(this.state.blobValue)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t(\"general.update\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\nexport default UploadCropImagePopup;\r\n","import {\n\tAvatar,\n\tButton,\n\tFormControl,\n\tGrid,\n\tInputLabel,\n\tMenuItem,\n\tPaper,\n\tSelect,\n\twithStyles,\n} from \"@material-ui/core\";\nimport { Block, Save } from \"@material-ui/icons\";\nimport React, { Component } from \"react\";\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ConstantList from \"../../appConfig\";\nimport authService from \"../../services/jwtAuthService\";\nimport localStorageService from \"../../services/localStorageService\";\nimport ValidatePicker from \"../Component/ValidateSelect/ValidatePicker\";\nimport ChangePasswordDiaglog from \"./ChangePasswordPopup\";\nimport UploadCropImagePopup from \"./UploadCropImagePopup\";\nimport {\n\tgetCurrentUser,\n\tupdateProfile,\n\tupdateUserAvatar,\n} from \"./UserProfileService\";\n\nconst API_PATH = ConstantList.API_ENPOINT + \"/api/fileUpload/\";\n\nclass UserProfile extends Component {\n\tstate = {\n\t\topen: true,\n\t\tuser: {\n\t\t\tperson: {},\n\t\t},\n\t\tshouldOpenImageDialog: false,\n\t\tshouldOpenPasswordDialog: false,\n\t\tisUpdate: false,\n\t};\n\twindowResizeListener;\n\n\ttoggleSidenav = () => {\n\t\tthis.setState({\n\t\t\topen: !this.state.open,\n\t\t});\n\t};\n\n\thandleWindowResize = () => {\n\t\treturn event => {\n\t\t\tif (event.target.innerWidth < 768) {\n\t\t\t\tthis.setState({ mobile: true });\n\t\t\t} else this.setState({ mobile: false });\n\t\t};\n\t};\n\n\tcomponentDidMount() {\n\t\tgetCurrentUser().then(({ data }) => {\n\t\t\tthis.setState({ user: data });\n\t\t});\n\t\t//let user = localStorageService.getLoginUser();\n\t\tif (window.innerWidth < 768) {\n\t\t\tthis.setState({ open: false });\n\t\t}\n\t\tif (window)\n\t\t\tthis.windowResizeListener = window.addEventListener(\n\t\t\t\t\"resize\",\n\t\t\t\tevent => {\n\t\t\t\t\tif (event.target.innerWidth < 768) {\n\t\t\t\t\t\tthis.setState({ open: false });\n\t\t\t\t\t} else this.setState({ open: true });\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tlet user = localStorageService.getLoginUser();\n\t\tgetCurrentUser();\n\t\tthis.setState({ user: user });\n\t\tif (window)\n\t\t\twindow.removeEventListener(\"resize\", this.windowResizeListener);\n\t}\n\n\thandleOpenUploadDialog = () => {\n\t\tthis.setState({\n\t\t\tshouldOpenImageDialog: true,\n\t\t});\n\t};\n\n\thandleDialogClose = () => {\n\t\tthis.setState({\n\t\t\tshouldOpenImageDialog: false,\n\t\t});\n\t};\n\n\thandleOpenPasswordDialog = () => {\n\t\tthis.setState({\n\t\t\tshouldOpenPasswordDialog: true,\n\t\t});\n\t};\n\n\thandleDialogPasswordClose = () => {\n\t\tthis.setState({\n\t\t\tshouldOpenPasswordDialog: false,\n\t\t});\n\t};\n\n\topenPasswordDialog = () => {\n\t\tthis.setState({\n\t\t\tshouldOpenPasswordDialog: true,\n\t\t});\n\t};\n\n\thandleUpdate = blobValue => {\n\t\tlet formData = new FormData();\n\t\tformData.set(\"uploadfile\", blobValue);\n\t\tupdateUserAvatar(formData).then(response => {\n\t\t\tconst user = response.data;\n\t\t\tthis.setState({ user: user });\n\t\t\tauthService.setLoginUser(user);\n\t\t\tthis.handleDialogClose();\n\t\t});\n\t};\n\n\thandleUserChange = e => {\n\t\tthis.setState({\n\t\t\tuser: {\n\t\t\t\t...this.state.user,\n\t\t\t\t[e.target.name]: e.target.value,\n\t\t\t},\n\t\t});\n\t};\n\n\thandlePersonChange = e => {\n\t\tthis.setState({\n\t\t\tuser: {\n\t\t\t\t...this.state.user,\n\t\t\t\tperson: {\n\t\t\t\t\t...this.state.user.person,\n\t\t\t\t\t[e.target.name]: e.target.value,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t};\n\n\thandleDateChange = date => {\n\t\tthis.setState({\n\t\t\tuser: {\n\t\t\t\t...this.state.user,\n\t\t\t\tperson: {\n\t\t\t\t\t...this.state.user.person,\n\t\t\t\t\tbirthDate: date,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t};\n\n\thandleFormSubmit = () => {\n\t\tconst { t } = this.props;\n\t\tupdateProfile(this.state.user)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisUpdate: false,\n\t\t\t\t});\n\t\t\t\ttoast.success(t(\"general.updateSuccess\"));\n\t\t\t})\n\t\t\t.catch(() => toast.error(t(\"general.error\")));\n\t};\n\n\trender() {\n\t\tlet { t, i18n } = this.props;\n\n\t\tconst genders = [\n\t\t\t{ id: \"M\", name: \"Nam\" },\n\t\t\t{ id: \"F\", name: \"Nữ\" },\n\t\t\t{ id: \"U\", name: \"Không rõ\" },\n\t\t];\n\n\t\tconst user = this.state.user;\n\t\tconst person = this.state.user.person;\n\t\tconst { isUpdate, shouldOpenImageDialog, shouldOpenPasswordDialog } =\n\t\t\tthis.state;\n\n\t\treturn (\n\t\t\t<div className=\"m-sm-30 \" t={t} i18n={i18n}>\n\t\t\t\t{shouldOpenImageDialog && (\n\t\t\t\t\t<UploadCropImagePopup\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\ti18n={i18n}\n\t\t\t\t\t\thandleClose={this.handleDialogClose}\n\t\t\t\t\t\thandleUpdate={this.handleUpdate}\n\t\t\t\t\t\topen={shouldOpenImageDialog}\n\t\t\t\t\t\tuploadUrl={API_PATH + \"avatarUpload\"}\n\t\t\t\t\t\tacceptType=\"png;jpg;gif;jpeg\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{shouldOpenPasswordDialog && (\n\t\t\t\t\t<ChangePasswordDiaglog\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\ti18n={i18n}\n\t\t\t\t\t\thandleClose={this.handleDialogPasswordClose}\n\t\t\t\t\t\topen={shouldOpenPasswordDialog}\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t<h4>{t(\"user.person_info\")}</h4>\n\t\t\t\t<ValidatorForm ref=\"form\" onSubmit={this.handleFormSubmit}>\n\t\t\t\t\t<Grid container spacing={4} className=\"mt-16\">\n\t\t\t\t\t\t<Grid item xs={12} sm={4}>\n\t\t\t\t\t\t\t<Paper\n\t\t\t\t\t\t\t\televation={3}\n\t\t\t\t\t\t\t\tclassName=\"px-12 py-30 flex-column flex-center flex-middle\"\n\t\t\t\t\t\t\t\tstyle={{ minHeight: \"50vh\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tclassName=\"mb-30\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\twidth: \"150px\",\n\t\t\t\t\t\t\t\t\t\theight: \"150px\",\n\t\t\t\t\t\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tthis.state.user\n\t\t\t\t\t\t\t\t\t\t\t? ConstantList.API_ENPOINT +\n\t\t\t\t\t\t\t\t\t\t\t  this.state.user.imagePath\n\t\t\t\t\t\t\t\t\t\t\t: ConstantList.ROOT_PATH +\n\t\t\t\t\t\t\t\t\t\t\t  \"assets/images/avatar.jpg\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={this.handleOpenUploadDialog}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<h4>{person?.displayName ?? \"\"}</h4>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} sm={7}>\n\t\t\t\t\t\t\t<Paper\n\t\t\t\t\t\t\t\televation={3}\n\t\t\t\t\t\t\t\tclassName=\"px-12 py-30 flex-column flex-center flex-middle\"\n\t\t\t\t\t\t\t\tstyle={{ minHeight: \"50vh\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\t\tspacing={2}\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\tclassName=\"ml-16\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.firstName\")}\n\t\t\t\t\t\t\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={person?.firstName ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handlePersonChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.lastName\")}\n\t\t\t\t\t\t\t\t\t\t\tvalue={person?.lastName ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handlePersonChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.displayName\")}\n\t\t\t\t\t\t\t\t\t\t\tvalue={person?.displayName ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\tname=\"displayName\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handlePersonChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.username\")}\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.username ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<ValidatePicker\n\t\t\t\t\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90\"\n\t\t\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.birthdate\")}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\t\t\tformat=\"dd/MM/yyyy\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"date-picker-inline\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\tperson?.birthDate ?? Date.now()\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-50 mb-16\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<InputLabel htmlFor=\"gender-simple\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t(\"user.gender\")}\n\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={person?.gender ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handlePersonChange\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"gender\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{genders.map(item => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.email\")}\n\t\t\t\t\t\t\t\t\t\t\tvalue={user?.email ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleUserChange}\n\t\t\t\t\t\t\t\t\t\t\tvalidators={[\"isEmail\"]}\n\t\t\t\t\t\t\t\t\t\t\terrorMessages={[\n\t\t\t\t\t\t\t\t\t\t\t\t\"Email không hợp lệ\",\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextValidator\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!isUpdate}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-90 mb-16\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"user.address\")}\n\t\t\t\t\t\t\t\t\t\t\tvalue={person?.birthPlace ?? \"\"}\n\t\t\t\t\t\t\t\t\t\t\tname=\"birthPlace\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handlePersonChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item md={4} lg={3} className=\"flex\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tclassName=\"mr-16\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tisUpdate: true,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"general.update\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => this.openPasswordDialog()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"user.changePass\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item md={5} lg={5} xl={5}></Grid>\n\n\t\t\t\t\t\t{isUpdate && (\n\t\t\t\t\t\t\t<Grid item sm={3} style={{ position: \"relative\" }}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\t\t\t\tright: \"16px\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tstartIcon={<Block />}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-12\"\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tisUpdate: false,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t(\"general.cancel\")}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tstartIcon={<Save />}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t(\"general.save\")}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t</ValidatorForm>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles({}, { withTheme: true })(UserProfile);\n"],"sourceRoot":""}