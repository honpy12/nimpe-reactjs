{"ast":null,"code":"import _objectSpread from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\src\\\\app\\\\views\\\\DengueLocation\\\\DengueFilter.jsx\";\nimport { Button } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport { getByPageByParentId, searchByDto } from \"../AdministrativeUnit/AdministrativeUnitService\";\nimport DatePicker from \"../Component/ValidateSelect/ValidatePicker\";\nimport AsynchronousAutocomplete from \"../utilities/AsynchronousAutocomplete\";\nimport \"./DengueFilter.css\";\nimport moment from \"moment\";\n\nvar DengueFilter = /*#__PURE__*/function (_Component) {\n  _inherits(DengueFilter, _Component);\n\n  var _super = _createSuper(DengueFilter);\n\n  function DengueFilter(props) {\n    var _this;\n\n    _classCallCheck(this, DengueFilter);\n\n    _this = _super.call(this, props);\n\n    _this.getProvinceListData = function () {\n      var searchOption = {\n        pageSize: 999,\n        pageIndex: 0\n      };\n      searchByDto(searchOption).then(function (data) {\n        _this.setState({\n          provinceList: data.content\n        });\n      });\n    };\n\n    _this.handleSelectAdministrativeUnit = function (value, source) {\n      if (\"province\" === source) {\n        _this.setState({\n          province: value\n        });\n\n        if (value != null) {\n          _this.setState({\n            districtOfResidenceSearch: {\n              pageSize: 999,\n              pageIndex: 0,\n              parentId: value.id\n            },\n            district: null,\n            ward: null\n          });\n        } else {\n          _this.setState({\n            district: null\n          });\n\n          _this.setState({\n            ward: null\n          });\n\n          _this.setState({\n            districtOfResidenceSearch: {\n              pageSize: 999,\n              pageIndex: 0\n            }\n          });\n\n          _this.setState({\n            wardOfResidenceSearch: {\n              pageSize: 999,\n              pageIndex: 0\n            }\n          });\n        }\n      }\n\n      if (\"district\" === source) {\n        _this.setState({\n          district: value\n        });\n\n        if (value != null) {\n          _this.setState({\n            wardOfResidenceSearch: {\n              pageSize: 999,\n              pageIndex: 0,\n              parentId: value.id\n            },\n            ward: null\n          });\n        } else {\n          _this.setState({\n            ward: null\n          });\n\n          _this.setState({\n            wardOfResidenceSearch: {\n              pageSize: 999,\n              pageIndex: 0\n            }\n          });\n        }\n      }\n\n      if (\"ward\" === source) {\n        _this.setState({\n          ward: value\n        });\n      }\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleDateChange = function (date, type) {\n      if (type === \"fromDate\") {\n        _this.setState({\n          fromDate: date\n        });\n      } else {\n        _this.setState({\n          endDate: date\n        });\n      }\n    };\n\n    _this.clearFilter = function () {\n      _this.setState({\n        fromDate: null,\n        endDate: null,\n        province: null,\n        district: null,\n        ward: null\n      }, function () {\n        return _this.props.handleFilter(_this.state);\n      });\n    };\n\n    _this.onHandleFilter = function () {\n      if (_this.state.fromDate !== null) {\n        _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n          fromDate: new Date(_this.state.fromDate).setHours(0, 0, 0, 0)\n        }), function () {\n          return _this.props.handleFilter(_this.state);\n        });\n      } else if (_this.state.endDate !== null) {\n        _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n          endDate: new Date(_this.state.endDate).setHours(23, 59, 0, 0)\n        }), function () {\n          return _this.props.handleFilter(_this.state);\n        });\n      } else if (_this.state.fromDate !== null && _this.state.endDate !== null) {\n        _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n          fromDate: new Date(_this.state.fromDate).setHours(0, 0, 0, 0),\n          endDate: new Date(_this.state.endDate).setHours(23, 59, 0, 0)\n        }), function () {\n          return _this.props.handleFilter(_this.state);\n        });\n      } else {\n        _this.props.handleFilter(_this.state);\n      }\n    };\n\n    _this.state = {\n      fromDate: null,\n      endDate: null,\n      province: null,\n      district: null,\n      ward: null,\n      provinceOfResidenceSearch: {\n        pageSize: 999,\n        pageIndex: 0,\n        isGetAllCity: true,\n        level: 3\n      },\n      districtOfResidenceSearch: {},\n      wardOfResidenceSearch: {}\n    };\n    return _this;\n  }\n\n  _createClass(DengueFilter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      ValidatorForm.addValidationRule(\"isDateBigger\", function (value) {\n        if (_this2.state.endDate !== null && value > _this2.state.endDate) {\n          return false;\n        }\n\n        return true;\n      });\n      ValidatorForm.addValidationRule(\"isDateLower\", function () {\n        if (_this2.state.fromDate !== null && _this2.state.endDate !== null && _this2.state.endDate < _this2.state.fromDate) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n      ValidatorForm.addValidationRule(\"isValidDate\", function (value) {\n        if (value !== null) {\n          var b = new Date(value).setHours(0, 0, 0, 0);\n          var a = new Date().setHours(0, 0, 0, 0);\n          return a >= b;\n        }\n\n        return true;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          fromDate = _this$state.fromDate,\n          endDate = _this$state.endDate,\n          provinceOfResidenceSearch = _this$state.provinceOfResidenceSearch,\n          districtOfResidenceSearch = _this$state.districtOfResidenceSearch,\n          wardOfResidenceSearch = _this$state.wardOfResidenceSearch,\n          province = _this$state.province,\n          district = _this$state.district,\n          ward = _this$state.ward;\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(ValidatorForm, {\n        ref: \"form\",\n        className: \"filter-containers\",\n        onSubmit: function onSubmit() {\n          return _this3.onHandleFilter();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DatePicker, {\n        disableToolbar: true,\n        autoOk: true,\n        variant: \"dialog\",\n        format: \"dd/MM/yyyy\",\n        margin: \"normal\",\n        name: \"fromDate\",\n        label: t(\"dengueLocation.fromDate\"),\n        value: fromDate,\n        onChange: function onChange(date) {\n          return _this3.handleDateChange(date, \"fromDate\");\n        },\n        KeyboardButtonProps: {\n          \"aria-label\": \"change date\"\n        },\n        validators: [\"isValidDate\", \"isDateBigger\", \"isDateLower\"],\n        errorMessages: [t(\"dengueLocation.error1\"), t(\"dengueLocation.error2\")],\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(DatePicker, {\n        disableToolbar: true,\n        autoOk: true,\n        variant: \"dialog\",\n        format: \"dd/MM/yyyy\",\n        margin: \"normal\",\n        label: t(\"dengueLocation.toDate\"),\n        value: endDate,\n        onChange: function onChange(date) {\n          return _this3.handleDateChange(date, \"endDate\");\n        },\n        KeyboardButtonProps: {\n          \"aria-label\": \"change date\"\n        },\n        validators: [\"isValidDate\", \"isDateLower\"],\n        errorMessages: [t(\"dengueLocation.error1\"), t(\"dengueLocation.error3\")],\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AsynchronousAutocomplete, {\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"font\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 18\n          }\n        }, t(\"dengueLocation.province\")),\n        searchFunction: getByPageByParentId,\n        searchObject: provinceOfResidenceSearch,\n        value: province,\n        multiple: false,\n        inputValue: province ? province.name : \"\",\n        displayLable: \"name\",\n        className: \"w-100\",\n        onSelect: function onSelect(value) {\n          _this3.handleSelectAdministrativeUnit(value, \"province\");\n        },\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AsynchronousAutocomplete, {\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"font\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 18\n          }\n        }, t(\"dengueLocation.district\")),\n        searchFunction: getByPageByParentId,\n        searchObject: districtOfResidenceSearch,\n        value: district,\n        multiple: false,\n        inputValue: district ? district.name : \"\",\n        defaultValue: district,\n        displayLable: \"name\",\n        className: \"w-100\",\n        onSelect: function onSelect(value) {\n          _this3.handleSelectAdministrativeUnit(value, \"district\");\n        },\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AsynchronousAutocomplete, {\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"font\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 18\n          }\n        }, t(\"dengueLocation.ward\")),\n        searchFunction: getByPageByParentId,\n        searchObject: wardOfResidenceSearch,\n        value: ward,\n        multiple: false,\n        inputValue: ward ? ward.name : \"\",\n        defaultValue: ward,\n        displayLable: \"name\",\n        className: \"w-100\",\n        onSelect: function onSelect(value) {\n          _this3.handleSelectAdministrativeUnit(value, \"ward\");\n        },\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn-action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this3.clearFilter();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }\n      }, t(\"dengueLocation.reset\")), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: \"ml-12\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }\n      }, t(\"general.search\"))));\n    }\n  }]);\n\n  return DengueFilter;\n}(Component);\n\nexport { DengueFilter as default };","map":{"version":3,"sources":["D:/OceanTech/nimpe/Client-V2/src/app/views/DengueLocation/DengueFilter.jsx"],"names":["Button","React","Component","ValidatorForm","getByPageByParentId","searchByDto","DatePicker","AsynchronousAutocomplete","moment","DengueFilter","props","getProvinceListData","searchOption","pageSize","pageIndex","then","data","setState","provinceList","content","handleSelectAdministrativeUnit","value","source","province","districtOfResidenceSearch","parentId","id","district","ward","wardOfResidenceSearch","handleChange","e","target","name","handleDateChange","date","type","fromDate","endDate","clearFilter","handleFilter","state","onHandleFilter","Date","setHours","provinceOfResidenceSearch","isGetAllCity","level","addValidationRule","b","a","t"],"mappings":"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","sourcesContent":["import { Button } from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\r\nimport {\r\n  getByPageByParentId,\r\n  searchByDto,\r\n} from \"../AdministrativeUnit/AdministrativeUnitService\";\r\nimport DatePicker from \"../Component/ValidateSelect/ValidatePicker\";\r\nimport AsynchronousAutocomplete from \"../utilities/AsynchronousAutocomplete\";\r\nimport \"./DengueFilter.css\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DengueFilter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      fromDate: null,\r\n      endDate: null,\r\n      province: null,\r\n      district: null,\r\n      ward: null,\r\n      provinceOfResidenceSearch: {\r\n        pageSize: 999,\r\n        pageIndex: 0,\r\n        isGetAllCity: true,\r\n        level: 3,\r\n      },\r\n      districtOfResidenceSearch: {},\r\n      wardOfResidenceSearch: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    ValidatorForm.addValidationRule(\"isDateBigger\", (value) => {\r\n      if (this.state.endDate !== null && value > this.state.endDate) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n    ValidatorForm.addValidationRule(\"isDateLower\", () => {\r\n      if (\r\n        this.state.fromDate !== null &&\r\n        this.state.endDate !== null &&\r\n        this.state.endDate < this.state.fromDate\r\n      ) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n    ValidatorForm.addValidationRule(\"isValidDate\", (value) => {\r\n      if (value !== null) {\r\n        const b = new Date(value).setHours(0, 0, 0, 0);\r\n        const a = new Date().setHours(0, 0, 0, 0);\r\n        return a >= b;\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n\r\n  getProvinceListData = () => {\r\n    const searchOption = {\r\n      pageSize: 999,\r\n      pageIndex: 0,\r\n    };\r\n    searchByDto(searchOption).then((data) => {\r\n      this.setState({\r\n        provinceList: data.content,\r\n      });\r\n    });\r\n  };\r\n\r\n  handleSelectAdministrativeUnit = (value, source) => {\r\n    if (\"province\" === source) {\r\n      this.setState({ province: value });\r\n\r\n      if (value != null) {\r\n        this.setState({\r\n          districtOfResidenceSearch: {\r\n            pageSize: 999,\r\n            pageIndex: 0,\r\n            parentId: value.id,\r\n          },\r\n          district: null,\r\n          ward: null,\r\n        });\r\n      } else {\r\n        this.setState({ district: null });\r\n        this.setState({ ward: null });\r\n        this.setState({\r\n          districtOfResidenceSearch: {\r\n            pageSize: 999,\r\n            pageIndex: 0,\r\n          },\r\n        });\r\n        this.setState({\r\n          wardOfResidenceSearch: {\r\n            pageSize: 999,\r\n            pageIndex: 0,\r\n          },\r\n        });\r\n      }\r\n    }\r\n    if (\"district\" === source) {\r\n      this.setState({ district: value });\r\n      if (value != null) {\r\n        this.setState({\r\n          wardOfResidenceSearch: {\r\n            pageSize: 999,\r\n            pageIndex: 0,\r\n            parentId: value.id,\r\n          },\r\n          ward: null,\r\n        });\r\n      } else {\r\n        this.setState({ ward: null });\r\n        this.setState({\r\n          wardOfResidenceSearch: {\r\n            pageSize: 999,\r\n            pageIndex: 0,\r\n          },\r\n        });\r\n      }\r\n    }\r\n    if (\"ward\" === source) {\r\n      this.setState({ ward: value });\r\n    }\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleDateChange = (date, type) => {\r\n    if (type === \"fromDate\") {\r\n      this.setState({\r\n        fromDate: date,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        endDate: date,\r\n      });\r\n    }\r\n  };\r\n\r\n  clearFilter = () => {\r\n    this.setState(\r\n      {\r\n        fromDate: null,\r\n        endDate: null,\r\n        province: null,\r\n        district: null,\r\n        ward: null,\r\n      },\r\n      () => this.props.handleFilter(this.state)\r\n    );\r\n  };\r\n\r\n  onHandleFilter = () => {\r\n    if (this.state.fromDate !== null) {\r\n      this.setState(\r\n        {\r\n          ...this.state,\r\n          fromDate: new Date(this.state.fromDate).setHours(0, 0, 0, 0),\r\n        },\r\n        () => this.props.handleFilter(this.state)\r\n      );\r\n    } else if (this.state.endDate !== null) {\r\n      this.setState(\r\n        {\r\n          ...this.state,\r\n          endDate: new Date(this.state.endDate).setHours(23, 59, 0, 0),\r\n        },\r\n        () => this.props.handleFilter(this.state)\r\n      );\r\n    } else if (this.state.fromDate !== null && this.state.endDate !== null) {\r\n      this.setState(\r\n        {\r\n          ...this.state,\r\n          fromDate: new Date(this.state.fromDate).setHours(0, 0, 0, 0),\r\n          endDate: new Date(this.state.endDate).setHours(23, 59, 0, 0),\r\n        },\r\n        () => this.props.handleFilter(this.state)\r\n      );\r\n    } else {\r\n      this.props.handleFilter(this.state);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      fromDate,\r\n      endDate,\r\n      provinceOfResidenceSearch,\r\n      districtOfResidenceSearch,\r\n      wardOfResidenceSearch,\r\n      province,\r\n      district,\r\n      ward,\r\n    } = this.state;\r\n    const { t } = this.props;\r\n\r\n    return (\r\n      <ValidatorForm\r\n        ref=\"form\"\r\n        className=\"filter-containers\"\r\n        onSubmit={() => this.onHandleFilter()}\r\n      >\r\n        <DatePicker\r\n          disableToolbar\r\n          autoOk\r\n          variant=\"dialog\"\r\n          format=\"dd/MM/yyyy\"\r\n          margin=\"normal\"\r\n          name=\"fromDate\"\r\n          label={t(\"dengueLocation.fromDate\")}\r\n          value={fromDate}\r\n          onChange={(date) => this.handleDateChange(date, \"fromDate\")}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\",\r\n          }}\r\n          validators={[\"isValidDate\", \"isDateBigger\", \"isDateLower\"]}\r\n          errorMessages={[\r\n            t(\"dengueLocation.error1\"),\r\n            t(\"dengueLocation.error2\"),\r\n          ]}\r\n          className=\"mb-0\"\r\n        />\r\n\r\n        <DatePicker\r\n          disableToolbar\r\n          autoOk\r\n          variant=\"dialog\"\r\n          format=\"dd/MM/yyyy\"\r\n          margin=\"normal\"\r\n          label={t(\"dengueLocation.toDate\")}\r\n          value={endDate}\r\n          onChange={(date) => this.handleDateChange(date, \"endDate\")}\r\n          KeyboardButtonProps={{\r\n            \"aria-label\": \"change date\",\r\n          }}\r\n          validators={[\"isValidDate\", \"isDateLower\"]}\r\n          errorMessages={[\r\n            t(\"dengueLocation.error1\"),\r\n            t(\"dengueLocation.error3\"),\r\n          ]}\r\n          className=\"mb-0\"\r\n        />\r\n\r\n        <AsynchronousAutocomplete\r\n          label={<span className=\"font\">{t(\"dengueLocation.province\")}</span>}\r\n          searchFunction={getByPageByParentId}\r\n          searchObject={provinceOfResidenceSearch}\r\n          value={province}\r\n          multiple={false}\r\n          inputValue={province ? province.name : \"\"}\r\n          displayLable={\"name\"}\r\n          className=\"w-100\"\r\n          onSelect={(value) => {\r\n            this.handleSelectAdministrativeUnit(value, \"province\");\r\n          }}\r\n          size=\"small\"\r\n        />\r\n\r\n        <AsynchronousAutocomplete\r\n          label={<span className=\"font\">{t(\"dengueLocation.district\")}</span>}\r\n          searchFunction={getByPageByParentId}\r\n          searchObject={districtOfResidenceSearch}\r\n          value={district}\r\n          multiple={false}\r\n          inputValue={district ? district.name : \"\"}\r\n          defaultValue={district}\r\n          displayLable={\"name\"}\r\n          className=\"w-100\"\r\n          onSelect={(value) => {\r\n            this.handleSelectAdministrativeUnit(value, \"district\");\r\n          }}\r\n          size=\"small\"\r\n        />\r\n\r\n        <AsynchronousAutocomplete\r\n          label={<span className=\"font\">{t(\"dengueLocation.ward\")}</span>}\r\n          searchFunction={getByPageByParentId}\r\n          searchObject={wardOfResidenceSearch}\r\n          value={ward}\r\n          multiple={false}\r\n          inputValue={ward ? ward.name : \"\"}\r\n          defaultValue={ward}\r\n          displayLable={\"name\"}\r\n          className=\"w-100\"\r\n          onSelect={(value) => {\r\n            this.handleSelectAdministrativeUnit(value, \"ward\");\r\n          }}\r\n          size=\"small\"\r\n        />\r\n\r\n        <div className=\"btn-action\">\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => this.clearFilter()}\r\n          >\r\n            {t(\"dengueLocation.reset\")}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className=\"ml-12\"\r\n            type=\"submit\"\r\n          >\r\n            {t(\"general.search\")}\r\n          </Button>\r\n        </div>\r\n      </ValidatorForm>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}