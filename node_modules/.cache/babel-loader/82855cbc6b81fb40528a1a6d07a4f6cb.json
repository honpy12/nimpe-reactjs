{"ast":null,"code":"import _toConsumableArray from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\src\\\\app\\\\views\\\\Menus\\\\Menu.jsx\";\nimport { Button, Grid, Icon, IconButton, Tooltip } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Breadcrumb, ConfirmationDialog } from \"egret\";\nimport MaterialTable, { MTableToolbar } from \"material-table\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\nimport NotificationPopup from \"../Component/NotificationPopup/NotificationPopup\";\nimport NicePagination from \"../Component/Pagination/NicePagination\";\nimport MenuDialog from \"./MenuDialog\";\nimport { deleteItem, getAllByRoot, getItemById } from \"./MenuService\";\nimport { Add } from \"@material-ui/icons\";\nvar LightTooltip = withStyles(function (theme) {\n  return {\n    tooltip: {\n      backgroundColor: theme.palette.common.white,\n      color: \"rgba(0, 0, 0, 0.87)\",\n      boxShadow: theme.shadows[1],\n      fontSize: 11,\n      position: \"absolute\",\n      top: \"-15px\",\n      left: \"-30px\",\n      width: \"80px\"\n    }\n  };\n})(Tooltip);\n\nfunction MaterialButton(props) {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var item = props.item;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"none_wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(LightTooltip, {\n    title: t(\"general.editIcon\"),\n    placement: \"right-end\",\n    enterDelay: 300,\n    leaveDelay: 200,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: function onClick() {\n      return props.onSelect(item, 0);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    fontSize: \"small\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 6\n    }\n  }, \"edit\"))), /*#__PURE__*/React.createElement(LightTooltip, {\n    title: t(\"general.deleteIcon\"),\n    placement: \"right-end\",\n    enterDelay: 300,\n    leaveDelay: 200,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    onClick: function onClick() {\n      return props.onSelect(item, 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    fontSize: \"small\",\n    color: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 6\n    }\n  }, \"delete\"))));\n}\n\nvar Menu = /*#__PURE__*/function (_React$Component) {\n  _inherits(Menu, _React$Component);\n\n  var _super = _createSuper(Menu);\n\n  function Menu(props) {\n    var _this;\n\n    _classCallCheck(this, Menu);\n\n    _this = _super.call(this, props); //this.state = {keyword: ''};\n\n    _this.state = {\n      rowsPerPage: 5,\n      page: 0,\n      data: [],\n      totalElements: 0,\n      totalPage: 0,\n      itemList: [],\n      shouldOpenEditorDialog: false,\n      shouldOpenConfirmationDialog: false,\n      shouldOpenConfirmationDeleteAllDialog: false,\n      keyword: \"\",\n      shouldOpenNotificationPopup: false,\n      Notification: \"\"\n    };\n\n    _this.handleKeyDownEnterSearch = function (e) {\n      if (e.key === \"Enter\") {\n        _this.search();\n      }\n    };\n\n    _this.updatePageData = function () {\n      var searchObject = {};\n      searchObject.keyword = \"\";\n      searchObject.pageIndex = _this.state.page + 1;\n      searchObject.pageSize = _this.state.rowsPerPage;\n      getAllByRoot().then(function (_ref) {\n        var data = _ref.data;\n\n        var itemList = _toConsumableArray(data);\n\n        var list = [];\n        itemList.forEach(function (item) {\n          var items = _this.getListItemChild(item);\n\n          list.push.apply(list, _toConsumableArray(items));\n        });\n        console.log(list);\n\n        _this.setState({\n          itemList: list,\n          totalElements: data.totalElements,\n          totalPage: data.totalPages\n        });\n      });\n    };\n\n    _this.setPage = function (page) {\n      _this.setState({\n        page: page\n      }, function () {\n        this.updatePageData();\n      });\n    };\n\n    _this.setRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value,\n        page: 0\n      }, function () {\n        this.updatePageData();\n      });\n    };\n\n    _this.handleChangePage = function (event, newPage) {\n      _this.setPage(newPage);\n    };\n\n    _this.handleOKEditClose = function () {\n      _this.setState({\n        shouldOpenEditorDialog: false,\n        shouldOpenConfirmationDialog: false\n      }, function () {\n        _this.updatePageData();\n      });\n    };\n\n    _this.handleDelete = function (id) {\n      _this.setState({\n        id: id,\n        shouldOpenConfirmationDialog: true\n      });\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        shouldOpenEditorDialog: false,\n        shouldOpenConfirmationDialog: false,\n        shouldOpenConfirmationDeleteAllDialog: false,\n        shouldOpenNotificationPopup: false,\n        data: []\n      }, function () {\n        _this.updatePageData();\n      });\n    };\n\n    _this.handleOKEditClose = function () {\n      _this.setState({\n        shouldOpenEditorDialog: false,\n        shouldOpenConfirmationDialog: false,\n        shouldOpenConfirmationDeleteAllDialog: false\n      });\n\n      _this.setPage(0);\n    };\n\n    _this.handleDelete = function (id) {\n      _this.setState({\n        id: id,\n        shouldOpenConfirmationDialog: true\n      });\n    };\n\n    _this.handleConfirmationResponse = function () {\n      if (_this.state.itemList.length === 1 && _this.state.page === 1) {\n        var count = _this.state.page - 1;\n\n        _this.setState({\n          page: count\n        });\n      }\n\n      deleteItem(_this.state.id).then(function () {\n        _this.updatePageData();\n\n        _this.handleDialogClose();\n      });\n    };\n\n    _this.handleEditItem = function (item) {\n      _this.setState({\n        item: item,\n        shouldOpenEditorDialog: true\n      });\n    };\n\n    _this.handleDeleteButtonClick = function () {\n      if (typeof _this.state.data === \"undefined\" || _this.state.data.length === 0) {\n        _this.setState({\n          shouldOpenNotificationPopup: true,\n          Notification: \"general.noti_check_data\"\n        }); // alert('Chưa chọn dữ liệu')\n\n      } else {\n        _this.setState({\n          shouldOpenConfirmationDeleteAllDialog: true\n        });\n      }\n    };\n\n    _this.handleDeleteAll = function (event) {\n      _this.handleDeleteList(_this.state.data).then(function () {\n        _this.updatePageData(); // this.handleDialogClose()\n\n      });\n    };\n\n    _this.handleTextChange = _this.handleTextChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: \"handleTextChange\",\n    value: function handleTextChange(event) {\n      this.setState({\n        keyword: event.target.value\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updatePageData();\n    }\n  }, {\n    key: \"getListItemChild\",\n    value: function getListItemChild(item) {\n      var _this2 = this;\n\n      var result = [];\n      var root = {};\n      root.name = item.name;\n      root.description = item.description;\n      root.code = item.code;\n      root.icon = item.icon;\n      root.path = item.path;\n      root.id = item.id;\n      root.parentId = item.parentId;\n      result.push(root);\n\n      if (item.children) {\n        item.children.forEach(function (child) {\n          var childs = _this2.getListItemChild(child);\n\n          result.push.apply(result, _toConsumableArray(childs));\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          t = _this$props.t,\n          i18n = _this$props.i18n;\n      var _this$state = this.state,\n          keyword = _this$state.keyword,\n          shouldOpenNotificationPopup = _this$state.shouldOpenNotificationPopup,\n          totalElements = _this$state.totalElements,\n          totalPage = _this$state.totalPage,\n          page = _this$state.page,\n          rowsPerPage = _this$state.rowsPerPage,\n          shouldOpenConfirmationDialog = _this$state.shouldOpenConfirmationDialog;\n      var TitlePage = t(\"menu.title\");\n      var columns = [{\n        title: t(\"general.action\"),\n        field: \"custom\",\n        align: \"left\",\n        width: \"120px\",\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(MaterialButton, {\n            item: rowData,\n            onSelect: function onSelect(rowData, method) {\n              if (method === 0) {\n                getItemById(rowData.id).then(function (_ref2) {\n                  var data = _ref2.data;\n\n                  if (data.parent === null) {\n                    data.parent = {};\n                  }\n\n                  _this3.setState({\n                    item: data,\n                    shouldOpenEditorDialog: true\n                  });\n                });\n              } else if (method === 1) {\n                _this3.handleDelete(rowData.id);\n              } else {\n                alert(\"Call Selected Here:\" + rowData.id);\n              }\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 6\n            }\n          });\n        }\n      }, {\n        title: t(\"menu.description\"),\n        field: \"description\",\n        align: \"left\",\n        width: \"150\"\n      }, {\n        title: t(\"menu.name\"),\n        field: \"name\",\n        width: \"150\"\n      }, {\n        title: t(\"menu.code\"),\n        field: \"code\",\n        align: \"left\",\n        width: \"150\"\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(Helmet, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 6\n        }\n      }, TitlePage, \" | \", t(\"web_site\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Breadcrumb, {\n        routeSegments: [{\n          name: t(\"Dashboard.manage\"),\n          path: \"/directory/apartment\"\n        }, {\n          name: TitlePage\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 6\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        justify: \"space-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        md: 3,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"align-bottom\",\n        variant: \"contained\",\n        color: \"primary\",\n        startIcon: /*#__PURE__*/React.createElement(Add, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 19\n          }\n        }),\n        onClick: function onClick() {\n          return _this3.handleEditItem(null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 7\n        }\n      }, t(\"general.add\")), this.state.shouldOpenConfirmationDeleteAllDialog && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n        open: this.state.shouldOpenConfirmationDeleteAllDialog,\n        onConfirmDialogClose: this.handleDialogClose,\n        onYesClick: this.handleDeleteAll,\n        text: t(\"general.deleteAllConfirm\"),\n        cancel: t(\"general.cancel\"),\n        agree: t(\"general.agree\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 8\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 7\n        }\n      }, this.state.shouldOpenEditorDialog && /*#__PURE__*/React.createElement(MenuDialog, {\n        t: t,\n        i18n: i18n,\n        handleClose: this.handleDialogClose,\n        open: this.state.shouldOpenEditorDialog,\n        handleOKEditClose: this.handleOKEditClose,\n        item: this.state.item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 9\n        }\n      }), shouldOpenNotificationPopup && /*#__PURE__*/React.createElement(NotificationPopup, {\n        title: t(\"general.noti\"),\n        open: shouldOpenNotificationPopup // onConfirmDialogClose={this.handleDialogClose}\n        ,\n        onYesClick: this.handleDialogClose,\n        text: t(this.state.Notification),\n        agree: t(\"general.agree\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 9\n        }\n      }), shouldOpenConfirmationDialog && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n        open: shouldOpenConfirmationDialog,\n        onConfirmDialogClose: this.handleDialogClose,\n        title: t(\"general.confirm\"),\n        text: t(\"general.deleteConfirm\"),\n        onYesClick: this.handleConfirmationResponse,\n        agree: t(\"general.agree\"),\n        cancel: t(\"general.cancel\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(MaterialTable, {\n        data: this.state.itemList,\n        columns: columns,\n        parentChildData: function parentChildData(row, rows) {\n          var list = rows.find(function (a) {\n            return a.id === row.parentId;\n          });\n          return list;\n        },\n        localization: {\n          body: {\n            emptyDataSourceMessage: \"\".concat(t(\"general.emptyDataMessageTable\"))\n          }\n        },\n        options: {\n          selection: false,\n          actionsColumnIndex: -1,\n          paging: false,\n          search: false,\n          rowStyle: function rowStyle(rowData) {\n            return {\n              backgroundColor: rowData.tableData.id % 2 === 1 ? \"#EEE\" : \"#FFF\"\n            };\n          },\n          maxBodyHeight: \"450px\",\n          minBodyHeight: \"370px\",\n          headerStyle: {\n            backgroundColor: \"#2a80c8\",\n            color: \"#fff\",\n            height: \"50px\"\n          },\n          padding: \"dense\",\n          toolbar: false\n        },\n        onSelectionChange: function onSelectionChange(rows) {\n          _this3.setState({\n            data: rows\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(NicePagination, {\n        totalPages: totalPage,\n        handleChangePage: this.handleChangePage,\n        setRowsPerPage: this.setRowsPerPage,\n        pageSize: rowsPerPage,\n        pageSizeOption: [1, 2, 3, 5, 10, 25],\n        t: t,\n        totalElements: totalElements,\n        page: page,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 7\n        }\n      }))));\n    }\n  }]);\n\n  return Menu;\n}(React.Component);\n\nexport default Menu;","map":{"version":3,"sources":["D:/OceanTech/nimpe/Client-V2/src/app/views/Menus/Menu.jsx"],"names":["Button","Grid","Icon","IconButton","Tooltip","withStyles","Breadcrumb","ConfirmationDialog","MaterialTable","MTableToolbar","React","Helmet","useTranslation","NotificationPopup","NicePagination","MenuDialog","deleteItem","getAllByRoot","getItemById","Add","LightTooltip","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","fontSize","position","top","left","width","MaterialButton","props","t","i18n","item","onSelect","Menu","state","rowsPerPage","page","data","totalElements","totalPage","itemList","shouldOpenEditorDialog","shouldOpenConfirmationDialog","shouldOpenConfirmationDeleteAllDialog","keyword","shouldOpenNotificationPopup","Notification","handleKeyDownEnterSearch","e","key","search","updatePageData","searchObject","pageIndex","pageSize","then","list","forEach","items","getListItemChild","push","console","log","setState","totalPages","setPage","setRowsPerPage","event","target","value","handleChangePage","newPage","handleOKEditClose","handleDelete","id","handleDialogClose","handleConfirmationResponse","length","count","handleEditItem","handleDeleteButtonClick","handleDeleteAll","handleDeleteList","handleTextChange","bind","result","root","name","description","code","icon","path","parentId","children","child","childs","TitlePage","columns","title","field","align","render","rowData","method","parent","alert","row","rows","find","a","body","emptyDataSourceMessage","selection","actionsColumnIndex","paging","rowStyle","tableData","maxBodyHeight","minBodyHeight","headerStyle","height","padding","toolbar","Component"],"mappings":"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","sourcesContent":["import { Button, Grid, Icon, IconButton, Tooltip } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Breadcrumb, ConfirmationDialog } from \"egret\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport NotificationPopup from \"../Component/NotificationPopup/NotificationPopup\";\r\nimport NicePagination from \"../Component/Pagination/NicePagination\";\r\nimport MenuDialog from \"./MenuDialog\";\r\nimport { deleteItem, getAllByRoot, getItemById } from \"./MenuService\";\r\nimport { Add } from \"@material-ui/icons\";\r\nconst LightTooltip = withStyles(theme => ({\r\n\ttooltip: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: \"rgba(0, 0, 0, 0.87)\",\r\n\t\tboxShadow: theme.shadows[1],\r\n\t\tfontSize: 11,\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"-15px\",\r\n\t\tleft: \"-30px\",\r\n\t\twidth: \"80px\",\r\n\t},\r\n}))(Tooltip);\r\n\r\nfunction MaterialButton(props) {\r\n\tconst { t, i18n } = useTranslation();\r\n\tconst item = props.item;\r\n\treturn (\r\n\t\t<div className=\"none_wrap\">\r\n\t\t\t<LightTooltip\r\n\t\t\t\ttitle={t(\"general.editIcon\")}\r\n\t\t\t\tplacement=\"right-end\"\r\n\t\t\t\tenterDelay={300}\r\n\t\t\t\tleaveDelay={200}\r\n\t\t\t>\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tonClick={() => props.onSelect(item, 0)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon fontSize=\"small\" color=\"primary\">\r\n\t\t\t\t\t\tedit\r\n\t\t\t\t\t</Icon>\r\n\t\t\t\t</IconButton>\r\n\t\t\t</LightTooltip>\r\n\t\t\t<LightTooltip\r\n\t\t\t\ttitle={t(\"general.deleteIcon\")}\r\n\t\t\t\tplacement=\"right-end\"\r\n\t\t\t\tenterDelay={300}\r\n\t\t\t\tleaveDelay={200}\r\n\t\t\t>\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tonClick={() => props.onSelect(item, 1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon fontSize=\"small\" color=\"error\">\r\n\t\t\t\t\t\tdelete\r\n\t\t\t\t\t</Icon>\r\n\t\t\t\t</IconButton>\r\n\t\t\t</LightTooltip>\r\n\t\t</div>\r\n\t);\r\n}\r\nclass Menu extends React.Component {\r\n\tstate = {\r\n\t\trowsPerPage: 5,\r\n\t\tpage: 0,\r\n\t\tdata: [],\r\n\t\ttotalElements: 0,\r\n\t\ttotalPage: 0,\r\n\t\titemList: [],\r\n\t\tshouldOpenEditorDialog: false,\r\n\t\tshouldOpenConfirmationDialog: false,\r\n\t\tshouldOpenConfirmationDeleteAllDialog: false,\r\n\t\tkeyword: \"\",\r\n\t\tshouldOpenNotificationPopup: false,\r\n\t\tNotification: \"\",\r\n\t};\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t//this.state = {keyword: ''};\r\n\t\tthis.handleTextChange = this.handleTextChange.bind(this);\r\n\t}\r\n\thandleTextChange(event) {\r\n\t\tthis.setState({ keyword: event.target.value });\r\n\t}\r\n\r\n\thandleKeyDownEnterSearch = e => {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tthis.search();\r\n\t\t}\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tthis.updatePageData();\r\n\t}\r\n\tgetListItemChild(item) {\r\n\t\tvar result = [];\r\n\t\tvar root = {};\r\n\t\troot.name = item.name;\r\n\t\troot.description = item.description;\r\n\t\troot.code = item.code;\r\n\t\troot.icon = item.icon;\r\n\t\troot.path = item.path;\r\n\t\troot.id = item.id;\r\n\t\troot.parentId = item.parentId;\r\n\t\tresult.push(root);\r\n\t\tif (item.children) {\r\n\t\t\titem.children.forEach(child => {\r\n\t\t\t\tvar childs = this.getListItemChild(child);\r\n\t\t\t\tresult.push(...childs);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tupdatePageData = () => {\r\n\t\tvar searchObject = {};\r\n\t\tsearchObject.keyword = \"\";\r\n\t\tsearchObject.pageIndex = this.state.page + 1;\r\n\t\tsearchObject.pageSize = this.state.rowsPerPage;\r\n\t\tgetAllByRoot().then(({ data }) => {\r\n\t\t\tvar itemList = [...data];\r\n\t\t\tvar list = [];\r\n\t\t\titemList.forEach(item => {\r\n\t\t\t\tvar items = this.getListItemChild(item);\r\n\t\t\t\tlist.push(...items);\r\n\t\t\t});\r\n\t\t\tconsole.log(list);\r\n\t\t\tthis.setState({\r\n\t\t\t\titemList: list,\r\n\t\t\t\ttotalElements: data.totalElements,\r\n\t\t\t\ttotalPage: data.totalPages,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\tsetPage = page => {\r\n\t\tthis.setState({ page }, function () {\r\n\t\t\tthis.updatePageData();\r\n\t\t});\r\n\t};\r\n\r\n\tsetRowsPerPage = event => {\r\n\t\tthis.setState(\r\n\t\t\t{ rowsPerPage: event.target.value, page: 0 },\r\n\t\t\tfunction () {\r\n\t\t\t\tthis.updatePageData();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\thandleChangePage = (event, newPage) => {\r\n\t\tthis.setPage(newPage);\r\n\t};\r\n\r\n\thandleOKEditClose = () => {\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tshouldOpenEditorDialog: false,\r\n\t\t\t\tshouldOpenConfirmationDialog: false,\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.updatePageData();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\thandleDelete = id => {\r\n\t\tthis.setState({\r\n\t\t\tid,\r\n\t\t\tshouldOpenConfirmationDialog: true,\r\n\t\t});\r\n\t};\r\n\thandleDialogClose = () => {\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tshouldOpenEditorDialog: false,\r\n\t\t\t\tshouldOpenConfirmationDialog: false,\r\n\t\t\t\tshouldOpenConfirmationDeleteAllDialog: false,\r\n\t\t\t\tshouldOpenNotificationPopup: false,\r\n\t\t\t\tdata: [],\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.updatePageData();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\thandleOKEditClose = () => {\r\n\t\tthis.setState({\r\n\t\t\tshouldOpenEditorDialog: false,\r\n\t\t\tshouldOpenConfirmationDialog: false,\r\n\t\t\tshouldOpenConfirmationDeleteAllDialog: false,\r\n\t\t});\r\n\t\tthis.setPage(0);\r\n\t};\r\n\r\n\thandleDelete = id => {\r\n\t\tthis.setState({\r\n\t\t\tid,\r\n\t\t\tshouldOpenConfirmationDialog: true,\r\n\t\t});\r\n\t};\r\n\r\n\thandleConfirmationResponse = () => {\r\n\t\tif (this.state.itemList.length === 1 && this.state.page === 1) {\r\n\t\t\tlet count = this.state.page - 1;\r\n\t\t\tthis.setState({\r\n\t\t\t\tpage: count,\r\n\t\t\t});\r\n\t\t}\r\n\t\tdeleteItem(this.state.id).then(() => {\r\n\t\t\tthis.updatePageData();\r\n\t\t\tthis.handleDialogClose();\r\n\t\t});\r\n\t};\r\n\thandleEditItem = item => {\r\n\t\tthis.setState({\r\n\t\t\titem: item,\r\n\t\t\tshouldOpenEditorDialog: true,\r\n\t\t});\r\n\t};\r\n\thandleDeleteButtonClick = () => {\r\n\t\tif (\r\n\t\t\ttypeof this.state.data === \"undefined\" ||\r\n\t\t\tthis.state.data.length === 0\r\n\t\t) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tshouldOpenNotificationPopup: true,\r\n\t\t\t\tNotification: \"general.noti_check_data\",\r\n\t\t\t});\r\n\t\t\t// alert('Chưa chọn dữ liệu')\r\n\t\t} else {\r\n\t\t\tthis.setState({ shouldOpenConfirmationDeleteAllDialog: true });\r\n\t\t}\r\n\t};\r\n\thandleDeleteAll = event => {\r\n\t\tthis.handleDeleteList(this.state.data).then(() => {\r\n\t\t\tthis.updatePageData();\r\n\t\t\t// this.handleDialogClose()\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { t, i18n } = this.props;\r\n\t\tlet {\r\n\t\t\tkeyword,\r\n\t\t\tshouldOpenNotificationPopup,\r\n\t\t\ttotalElements,\r\n\t\t\ttotalPage,\r\n\t\t\tpage,\r\n\t\t\trowsPerPage,\r\n\t\t\tshouldOpenConfirmationDialog,\r\n\t\t} = this.state;\r\n\t\tlet TitlePage = t(\"menu.title\");\r\n\r\n\t\tlet columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: t(\"general.action\"),\r\n\t\t\t\tfield: \"custom\",\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\twidth: \"120px\",\r\n\t\t\t\trender: rowData => (\r\n\t\t\t\t\t<MaterialButton\r\n\t\t\t\t\t\titem={rowData}\r\n\t\t\t\t\t\tonSelect={(rowData, method) => {\r\n\t\t\t\t\t\t\tif (method === 0) {\r\n\t\t\t\t\t\t\t\tgetItemById(rowData.id).then(({ data }) => {\r\n\t\t\t\t\t\t\t\t\tif (data.parent === null) {\r\n\t\t\t\t\t\t\t\t\t\tdata.parent = {};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\titem: data,\r\n\t\t\t\t\t\t\t\t\t\tshouldOpenEditorDialog: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else if (method === 1) {\r\n\t\t\t\t\t\t\t\tthis.handleDelete(rowData.id);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\talert(\"Call Selected Here:\" + rowData.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: t(\"menu.description\"),\r\n\t\t\t\tfield: \"description\",\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\twidth: \"150\",\r\n\t\t\t},\r\n\t\t\t{ title: t(\"menu.name\"), field: \"name\", width: \"150\" },\r\n\t\t\t{\r\n\t\t\t\ttitle: t(\"menu.code\"),\r\n\t\t\t\tfield: \"code\",\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\twidth: \"150\",\r\n\t\t\t},\r\n\t\t];\r\n\t\treturn (\r\n\t\t\t<div className=\"m-sm-30\">\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>\r\n\t\t\t\t\t\t{TitlePage} | {t(\"web_site\")}\r\n\t\t\t\t\t</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div className=\"mb-sm-30\">\r\n\t\t\t\t\t{/* <Breadcrumb routeSegments={[{ name: t('Supplier.title') }]} /> */}\r\n\t\t\t\t\t<Breadcrumb \r\n\t\t\t\t\t\trouteSegments={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: t(\"Dashboard.manage\"),\r\n\t\t\t\t\t\t\t\tpath: \"/directory/apartment\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ name: TitlePage }\r\n\t\t\t\t\t\t]} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Grid container spacing={2} justify=\"space-between\">\r\n\t\t\t\t\t<Grid item md={3} xs={12}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"align-bottom\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tstartIcon={<Add />}\r\n\t\t\t\t\t\t\tonClick={() => this.handleEditItem(null)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"general.add\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{/* <Button\r\n              className=\"align-bottom mb-16\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={this.handleDeleteButtonClick}\r\n            >\r\n              {t('general.delete')}\r\n            </Button> */}\r\n\r\n\t\t\t\t\t\t{this.state.shouldOpenConfirmationDeleteAllDialog && (\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\topen={\r\n\t\t\t\t\t\t\t\t\tthis.state\r\n\t\t\t\t\t\t\t\t\t\t.shouldOpenConfirmationDeleteAllDialog\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonConfirmDialogClose={this.handleDialogClose}\r\n\t\t\t\t\t\t\t\tonYesClick={this.handleDeleteAll}\r\n\t\t\t\t\t\t\t\ttext={t(\"general.deleteAllConfirm\")}\r\n\t\t\t\t\t\t\t\tcancel={t(\"general.cancel\")}\r\n\t\t\t\t\t\t\t\tagree={t(\"general.agree\")}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* <TextField\r\n              label={t('Supplier.search')}\r\n              className=\"mb-16 mr-10\"\r\n              style={{ width: '20%' }}\r\n              type=\"text\"\r\n              name=\"keyword\"\r\n              value={keyword}\r\n              onChange={this.handleTextChange}\r\n              onKeyDown={this.handleKeyDownEnterSearch}\r\n            />\r\n            <Button\r\n              className=\"mb-16 mr-16 align-bottom\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => this.search(keyword)}\r\n            >\r\n              {t('general.search')}\r\n            </Button> */}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{/* <Grid item md={6} sm={12} xs={12} >\r\n            <FormControl fullWidth style={{marginTop:'6px'}}>\r\n                <Input\r\n                    className='search_box w-100'\r\n                    onChange={this.handleTextChange}\r\n                    onKeyDown={this.handleKeyDownEnterSearch}\r\n                    placeholder={t(\"Supplier.search\")}\r\n                    id=\"search_box\"\r\n                    startAdornment={\r\n                        <InputAdornment>\r\n                             <Link> <SearchIcon \r\n                            onClick={() => this.search(keyword)}\r\n                            style ={{position:\"absolute\",\r\n                            top:\"0\",\r\n                            right:\"0\"\r\n                          }} /></Link>\r\n                        </InputAdornment>\r\n                    }\r\n                />\r\n            </FormControl>\r\n          </Grid> */}\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{this.state.shouldOpenEditorDialog && (\r\n\t\t\t\t\t\t\t\t<MenuDialog\r\n\t\t\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\t\t\ti18n={i18n}\r\n\t\t\t\t\t\t\t\t\thandleClose={this.handleDialogClose}\r\n\t\t\t\t\t\t\t\t\topen={this.state.shouldOpenEditorDialog}\r\n\t\t\t\t\t\t\t\t\thandleOKEditClose={this.handleOKEditClose}\r\n\t\t\t\t\t\t\t\t\titem={this.state.item}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{shouldOpenNotificationPopup && (\r\n\t\t\t\t\t\t\t\t<NotificationPopup\r\n\t\t\t\t\t\t\t\t\ttitle={t(\"general.noti\")}\r\n\t\t\t\t\t\t\t\t\topen={shouldOpenNotificationPopup}\r\n\t\t\t\t\t\t\t\t\t// onConfirmDialogClose={this.handleDialogClose}\r\n\t\t\t\t\t\t\t\t\tonYesClick={this.handleDialogClose}\r\n\t\t\t\t\t\t\t\t\ttext={t(this.state.Notification)}\r\n\t\t\t\t\t\t\t\t\tagree={t(\"general.agree\")}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{shouldOpenConfirmationDialog && (\r\n\t\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\t\topen={shouldOpenConfirmationDialog}\r\n\t\t\t\t\t\t\t\t\tonConfirmDialogClose={\r\n\t\t\t\t\t\t\t\t\t\tthis.handleDialogClose\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttitle={t(\"general.confirm\")}\r\n\t\t\t\t\t\t\t\t\ttext={t(\"general.deleteConfirm\")}\r\n\t\t\t\t\t\t\t\t\tonYesClick={this.handleConfirmationResponse}\r\n\t\t\t\t\t\t\t\t\tagree={t(\"general.agree\")}\r\n\t\t\t\t\t\t\t\t\tcancel={t(\"general.cancel\")}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<MaterialTable\r\n\t\t\t\t\t\t\tdata={this.state.itemList}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t\tparentChildData={(row, rows) => {\r\n\t\t\t\t\t\t\t\tvar list = rows.find(\r\n\t\t\t\t\t\t\t\t\ta => a.id === row.parentId\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\treturn list;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tlocalization={{\r\n\t\t\t\t\t\t\t\tbody: {\r\n\t\t\t\t\t\t\t\t\temptyDataSourceMessage: `${t(\r\n\t\t\t\t\t\t\t\t\t\t\"general.emptyDataMessageTable\"\r\n\t\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\tselection: false,\r\n\t\t\t\t\t\t\t\tactionsColumnIndex: -1,\r\n\t\t\t\t\t\t\t\tpaging: false,\r\n\t\t\t\t\t\t\t\tsearch: false,\r\n\t\t\t\t\t\t\t\trowStyle: rowData => ({\r\n\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\trowData.tableData.id % 2 === 1\r\n\t\t\t\t\t\t\t\t\t\t\t? \"#EEE\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"#FFF\",\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tmaxBodyHeight: \"450px\",\r\n\t\t\t\t\t\t\t\tminBodyHeight: \"370px\",\r\n\t\t\t\t\t\t\t\theaderStyle: {\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: \"#2a80c8\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t\t\t\t\theight: \"50px\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpadding: \"dense\",\r\n\t\t\t\t\t\t\t\ttoolbar: false,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonSelectionChange={rows => {\r\n\t\t\t\t\t\t\t\tthis.setState({ data: rows });\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<NicePagination\r\n\t\t\t\t\t\t\ttotalPages={totalPage}\r\n\t\t\t\t\t\t\thandleChangePage={this.handleChangePage}\r\n\t\t\t\t\t\t\tsetRowsPerPage={this.setRowsPerPage}\r\n\t\t\t\t\t\t\tpageSize={rowsPerPage}\r\n\t\t\t\t\t\t\tpageSizeOption={[1, 2, 3, 5, 10, 25]}\r\n\t\t\t\t\t\t\tt={t}\r\n\t\t\t\t\t\t\ttotalElements={totalElements}\r\n\t\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Menu;\r\n"]},"metadata":{},"sourceType":"module"}