{"ast":null,"code":"import _objectSpread from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\n\nvar _jsxFileName = \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\src\\\\app\\\\views\\\\Feedback\\\\FeedbackDialog.jsx\",\n    _this = this;\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Paper } from \"@material-ui/core\";\nimport { Block, Save } from \"@material-ui/icons\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport React, { Component } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { searchByPage } from \"../User/UserService\";\nimport { addFeedback, updateFeedback } from \"./FeedbackServices\";\ntoast.configure({\n  autoClose: 2000,\n  draggable: false,\n  limit: 3\n});\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 4\n    }\n  })));\n}\n\nvar requireLabel = function requireLabel(item) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, item, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }\n  }, \"*\"));\n};\n\nvar FeedbackDialog = /*#__PURE__*/function (_Component) {\n  _inherits(FeedbackDialog, _Component);\n\n  var _super = _createSuper(FeedbackDialog);\n\n  function FeedbackDialog(props) {\n    var _this2;\n\n    _classCallCheck(this, FeedbackDialog);\n\n    _this2 = _super.call(this, props);\n\n    _this2.getAllUser = function () {\n      searchByPage({\n        pageIndex: 1,\n        pageSize: 100\n      }).then(function (_ref) {\n        var data = _ref.data;\n        return _this2.setState({\n          userList: data.content\n        });\n      });\n    };\n\n    _this2.onHandleChange = function (e) {\n      _this2.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this2.onSelectValue = function (value) {\n      _this2.setState({\n        user: value\n      });\n    };\n\n    _this2.onSubmit = function () {\n      var t = _this2.props.t;\n      var id = _this2.state.id;\n\n      if (id) {\n        updateFeedback(_this2.state).then(function () {\n          toast.success(t(\"general.updateSuccess\"));\n\n          _this2.props.handleOKEditClose();\n        }).catch(function () {\n          return toast.error(t(\"general.error\"));\n        });\n      } else {\n        addFeedback(_this2.state).then(function () {\n          toast.success(t(\"general.addSuccess\"));\n\n          _this2.props.handleOKEditClose();\n        }).catch(function () {\n          return toast.error(t(\"general.error\"));\n        });\n      }\n    };\n\n    _this2.state = {\n      userList: [],\n      user: null,\n      feedback: \"\"\n    };\n    return _this2;\n  }\n\n  _createClass(FeedbackDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.item) {\n        this.setState(_objectSpread({}, this.props.item));\n      }\n\n      this.getAllUser();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          open = _this$props.open,\n          handleClose = _this$props.handleClose,\n          t = _this$props.t,\n          item = _this$props.item;\n      var _this$state = this.state,\n          user = _this$state.user,\n          feedback = _this$state.feedback,\n          userList = _this$state.userList;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        open: open,\n        onClose: handleClose,\n        maxWidth: \"sm\",\n        fullWidth: true,\n        PaperComponent: PaperComponent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 5\n        }\n      }, \" \", item ? t(\"general.update\") : t(\"general.add\"), \" \", t(\"feedback.title\")), /*#__PURE__*/React.createElement(ValidatorForm, {\n        ref: \"form\",\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(DialogContent, {\n        dividers: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        sm: 6,\n        md: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(Autocomplete, {\n        style: {\n          width: \"100%\"\n        },\n        id: \"combo-box-demo\",\n        defaultValue: user,\n        options: userList,\n        getOptionSelected: function getOptionSelected(option, value) {\n          return option.id === value.id;\n        },\n        getOptionLabel: function getOptionLabel(option) {\n          return option.displayName;\n        },\n        onChange: function onChange(event, value) {\n          _this3.onSelectValue(value);\n        },\n        renderInput: function renderInput(params) {\n          return /*#__PURE__*/React.createElement(TextValidator, Object.assign({}, params, {\n            value: user,\n            label: requireLabel(\"Chọn người dùng\"),\n            fullWidth: true,\n            validators: [\"required\"],\n            errorMessages: [\"\".concat(t(\"general.required\"))],\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 11\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        sm: 12,\n        md: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(TextValidator, {\n        className: \"w-100\",\n        name: \"feedback\",\n        value: feedback,\n        label: requireLabel(\"Thông tin góp ý\"),\n        onChange: this.onHandleChange,\n        validators: [\"required\"],\n        errorMessages: [\"\".concat(t(\"general.required\"))],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 9\n        }\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-end flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: \"mr-12\",\n        startIcon: /*#__PURE__*/React.createElement(Block, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 20\n          }\n        }),\n        onClick: function onClick() {\n          return handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 8\n        }\n      }, t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"mr-8\",\n        startIcon: /*#__PURE__*/React.createElement(Save, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 20\n          }\n        }),\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 8\n        }\n      }, t(\"Save\"))))));\n    }\n  }]);\n\n  return FeedbackDialog;\n}(Component);\n\nexport { FeedbackDialog as default };","map":{"version":3,"sources":["D:/OceanTech/nimpe/Client-V2/src/app/views/Feedback/FeedbackDialog.jsx"],"names":["Button","Dialog","DialogActions","DialogContent","DialogTitle","Grid","Paper","Block","Save","Autocomplete","React","Component","Draggable","TextValidator","ValidatorForm","toast","searchByPage","addFeedback","updateFeedback","configure","autoClose","draggable","limit","PaperComponent","props","requireLabel","item","color","fontWeight","FeedbackDialog","getAllUser","pageIndex","pageSize","then","data","setState","userList","content","onHandleChange","e","target","name","value","onSelectValue","user","onSubmit","t","id","state","success","handleOKEditClose","catch","error","feedback","open","handleClose","width","option","displayName","event","params"],"mappings":"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","sourcesContent":["import {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tGrid,\r\n\tPaper,\r\n} from \"@material-ui/core\";\r\nimport { Block, Save } from \"@material-ui/icons\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { Component } from \"react\";\r\nimport Draggable from \"react-draggable\";\r\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { searchByPage } from \"../User/UserService\";\r\nimport { addFeedback, updateFeedback } from \"./FeedbackServices\";\r\n\r\ntoast.configure({\r\n\tautoClose: 2000,\r\n\tdraggable: false,\r\n\tlimit: 3,\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\thandle=\"#draggable-dialog-title\"\r\n\t\t\tcancel={'[class*=\"MuiDialogContent-root\"]'}\r\n\t\t>\r\n\t\t\t<Paper {...props} />\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\nconst requireLabel = item => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{item}\r\n\t\t\t<span style={{ color: \"red\", fontWeight: \"bold\" }}>*</span>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default class FeedbackDialog extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserList: [],\r\n\t\t\tuser: null,\r\n\t\t\tfeedback: \"\",\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.item) {\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.props.item,\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.getAllUser();\r\n\t}\r\n\r\n\tgetAllUser = () => {\r\n\t\tsearchByPage({\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 100,\r\n\t\t}).then(({ data }) => this.setState({ userList: data.content }));\r\n\t};\r\n\r\n\tonHandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tonSelectValue = value => {\r\n\t\tthis.setState({\r\n\t\t\tuser: value,\r\n\t\t});\r\n\t};\r\n\r\n\tonSubmit = () => {\r\n\t\tconst { t } = this.props;\r\n\t\tlet { id } = this.state;\r\n\t\tif (id) {\r\n\t\t\tupdateFeedback(this.state)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\ttoast.success(t(\"general.updateSuccess\"));\r\n\t\t\t\t\tthis.props.handleOKEditClose();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => toast.error(t(\"general.error\")));\r\n\t\t} else {\r\n\t\t\taddFeedback(this.state)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\ttoast.success(t(\"general.addSuccess\"));\r\n\t\t\t\t\tthis.props.handleOKEditClose();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => toast.error(t(\"general.error\")));\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { open, handleClose, t, item } = this.props;\r\n\t\tconst { user, feedback, userList } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tPaperComponent={PaperComponent}\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t{item ? t(\"general.update\") : t(\"general.add\")}{\" \"}\r\n\t\t\t\t\t{t(\"feedback.title\")}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<ValidatorForm ref=\"form\" onSubmit={this.onSubmit}>\r\n\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t<Grid item sm={6} md={6}>\r\n\t\t\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\t\t\t\t\tid=\"combo-box-demo\"\r\n\t\t\t\t\t\t\t\t\tdefaultValue={user}\r\n\t\t\t\t\t\t\t\t\toptions={userList}\r\n\t\t\t\t\t\t\t\t\tgetOptionSelected={(option, value) =>\r\n\t\t\t\t\t\t\t\t\t\toption.id === value.id\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgetOptionLabel={option =>\r\n\t\t\t\t\t\t\t\t\t\toption.displayName\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonChange={(event, value) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.onSelectValue(value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\trenderInput={params => (\r\n\t\t\t\t\t\t\t\t\t\t<TextValidator\r\n\t\t\t\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user}\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={requireLabel(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"Chọn người dùng\"\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tvalidators={[\"required\"]}\r\n\t\t\t\t\t\t\t\t\t\t\terrorMessages={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t`${t(\"general.required\")}`,\r\n\t\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item sm={12} md={12}>\r\n\t\t\t\t\t\t\t\t<TextValidator\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\t\t\t\tname=\"feedback\"\r\n\t\t\t\t\t\t\t\t\tvalue={feedback}\r\n\t\t\t\t\t\t\t\t\tlabel={requireLabel(\"Thông tin góp ý\")}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onHandleChange}\r\n\t\t\t\t\t\t\t\t\tvalidators={[\"required\"]}\r\n\t\t\t\t\t\t\t\t\terrorMessages={[`${t(\"general.required\")}`]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</DialogContent>\r\n\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<div className=\"flex flex-end flex-middle\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tclassName=\"mr-12\"\r\n\t\t\t\t\t\t\t\tstartIcon={<Block />}\r\n\t\t\t\t\t\t\t\tonClick={() => handleClose()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"Cancel\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tclassName=\"mr-8\"\r\n\t\t\t\t\t\t\t\tstartIcon={<Save />}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"Save\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</ValidatorForm>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}