{"ast":null,"code":"import _defineProperty from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\src\\\\app\\\\views\\\\VideoList\\\\VideoListDialog.jsx\";\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Paper } from \"@material-ui/core\";\nimport { Block, Save, CloudUpload } from \"@material-ui/icons\";\nimport React, { Component } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { addVideo, updateVideo } from \"./VideoListService\"; // import SelectParentPopup from \"./SelectParentPopup\";\n\nimport ConstantList from \"../../appConfig\";\nimport axios from \"axios\";\ntoast.configure({\n  autoClose: 2000,\n  draggable: false,\n  limit: 3\n});\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar VideoListDialog = /*#__PURE__*/function (_Component) {\n  _inherits(VideoListDialog, _Component);\n\n  var _super = _createSuper(VideoListDialog);\n\n  function VideoListDialog(props) {\n    var _this;\n\n    _classCallCheck(this, VideoListDialog);\n\n    _this = _super.call(this, props);\n\n    _this.handleChange = function (e) {\n      _this.setState({\n        videoList: _objectSpread(_objectSpread({}, _this.state.videoList), {}, _defineProperty({}, e.target.name, e.target.value))\n      });\n    };\n\n    _this.openParentPopup = function () {\n      _this.setState({\n        shouldOpenSelectParentPopup: true\n      });\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        shouldOpenSelectParentPopup: false\n      });\n    };\n\n    _this.handleFormSubmit = function () {\n      var t = _this.props.t;\n      var _this$state$videoList = _this.state.videoList,\n          title = _this$state$videoList.title,\n          descriptions = _this$state$videoList.descriptions;\n      var formData = new FormData();\n      formData.append(\"file\", _this.state.file);\n      formData.append(\"title\", title);\n      formData.append(\"descriptions\", descriptions);\n      var config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n\n      if (_this.state.videoList.id) {\n        updateVideo(_this.state.videoList.id, formData, config).then(function () {\n          toast.success(t(\"general.updateSuccess\"));\n\n          _this.props.handleOKDialog();\n        }).catch(function () {\n          toast.error(t(\"general.error\"));\n\n          _this.props.handleClose();\n        });\n      } else {\n        addVideo(formData, config).then(function (_ref) {\n          var data = _ref.data;\n          toast.success(t(\"general.addSuccess\"));\n\n          _this.props.handleOKDialog();\n\n          _this.setState(_objectSpread({}, _this.state.videoList));\n        }).catch(function () {\n          toast.error(t(\"general.error\"));\n\n          _this.props.handleClose();\n        });\n      }\n    };\n\n    _this.handleUploadFile = function (e) {\n      var fileUrl = window.URL.createObjectURL(e.target.files[0]);\n\n      _this.setState({\n        file: e.target.files[0],\n        videoUrl: fileUrl\n      });\n    };\n\n    _this.state = {\n      videoList: {\n        id: \"\",\n        title: \"\",\n        descriptions: \"\"\n      },\n      file: null,\n      shouldOpenSelectParentPopup: false\n    };\n    return _this;\n  }\n\n  _createClass(VideoListDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.item) {\n        this.setState({\n          videoList: _objectSpread({}, this.props.item)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          open = _this$props.open,\n          handleClose = _this$props.handleClose,\n          t = _this$props.t;\n      var videoUrl = this.state.videoUrl;\n      var _this$state$videoList2 = this.state.videoList,\n          id = _this$state$videoList2.id,\n          title = _this$state$videoList2.title,\n          descriptions = _this$state$videoList2.descriptions;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        onClose: handleClose,\n        open: open,\n        maxWidth: \"sm\",\n        fullWidth: true,\n        PaperComponent: PaperComponent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, id ? t(\"update\") : t(\"add\"), \" \", t(\"video.videoTitle\")), /*#__PURE__*/React.createElement(ValidatorForm, {\n        ref: \"form\",\n        onSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogContent, {\n        dividers: true,\n        style: {\n          overflowX: \"hidden\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        sm: 12,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(TextValidator, {\n        size: \"small\",\n        className: \"w-100 mb-16\",\n        label: t(\"video.title\"),\n        onChange: this.handleChange,\n        type: \"text\",\n        name: \"title\",\n        value: title || null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-18\",\n        style: {\n          position: \"relative\",\n          left: \"50%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, videoUrl && /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"video\", {\n        controls: true,\n        className: \"x-center\",\n        style: {\n          objectFit: \"contain\",\n          width: \"100%\",\n          height: \"300px\"\n        },\n        src: videoUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 23\n        }\n      })), this.state.videoList.id && !videoUrl && /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"video\", {\n        controls: true,\n        src: ConstantList.API_ENPOINT + \"/public/api/video/downloadVideo/\" + this.state.videoList.id,\n        className: \"x-center\",\n        style: {\n          objectFit: \"contain\",\n          width: \"100%\",\n          height: \"300px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 23\n        }\n      })), !videoUrl && !this.state.videoList.id && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"x-center\",\n        style: {\n          border: \"1px solid black\",\n          width: \"100%\",\n          height: \"306px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"id\",\n        style: {\n          background: \"#ffcb89\",\n          borderRadius: \"999px\",\n          padding: \"7px 14px\",\n          width: \"fit-content\",\n          display: \"flex\",\n          alignItems: \"center\",\n          cursor: \"pointer\",\n          margin: \"30px 0\"\n        },\n        onClick: this.upload,\n        className: \"x-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(CloudUpload, {\n        className: \"mr-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }\n      }), \"T\\u1EA3i l\\xEAn video\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"id\",\n        name: \"id\",\n        accept: \"video/*\",\n        onChange: this.handleUploadFile,\n        style: {\n          display: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(TextValidator, {\n        size: \"small\",\n        className: \"w-100 mb-16\",\n        label: t(\"video.description\"),\n        onChange: this.handleChange,\n        type: \"text\",\n        name: \"descriptions\",\n        value: descriptions || null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-end flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: \"mr-12\",\n        startIcon: /*#__PURE__*/React.createElement(Block, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 28\n          }\n        }),\n        onClick: function onClick() {\n          return _this2.props.handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }\n      }, t(\"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"mr-8\",\n        startIcon: /*#__PURE__*/React.createElement(Save, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 28\n          }\n        }),\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }\n      }, t(\"Save\"))))));\n    }\n  }]);\n\n  return VideoListDialog;\n}(Component);\n\nexport default VideoListDialog;","map":{"version":3,"sources":["D:/OceanTech/nimpe/Client-V2/src/app/views/VideoList/VideoListDialog.jsx"],"names":["Button","Dialog","DialogActions","DialogContent","DialogTitle","Grid","Paper","Block","Save","CloudUpload","React","Component","Draggable","TextValidator","ValidatorForm","toast","addVideo","updateVideo","ConstantList","axios","configure","autoClose","draggable","limit","PaperComponent","props","VideoListDialog","handleChange","e","setState","videoList","state","target","name","value","openParentPopup","shouldOpenSelectParentPopup","handleDialogClose","handleFormSubmit","t","title","descriptions","formData","FormData","append","file","config","headers","id","then","success","handleOKDialog","catch","error","handleClose","data","handleUploadFile","fileUrl","window","URL","createObjectURL","files","videoUrl","item","open","overflowX","position","left","objectFit","width","height","API_ENPOINT","border","background","borderRadius","padding","display","alignItems","cursor","margin","upload"],"mappings":"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","sourcesContent":["import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\nimport { Block, Save, CloudUpload } from \"@material-ui/icons\";\r\nimport React, { Component } from \"react\";\r\nimport Draggable from \"react-draggable\";\r\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { addVideo, updateVideo } from \"./VideoListService\";\r\n// import SelectParentPopup from \"./SelectParentPopup\";\r\nimport ConstantList from \"../../appConfig\";\r\nimport axios from \"axios\";\r\ntoast.configure({\r\n  autoClose: 2000,\r\n  draggable: false,\r\n  limit: 3,\r\n});\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nclass VideoListDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      videoList: {\r\n        id: \"\",\r\n        title: \"\",\r\n        descriptions: \"\",\r\n      },\r\n      file: null,\r\n      shouldOpenSelectParentPopup: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.item) {\r\n      this.setState({\r\n        videoList: {\r\n          ...this.props.item,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      videoList: {\r\n        ...this.state.videoList,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  openParentPopup = () => {\r\n    this.setState({ shouldOpenSelectParentPopup: true });\r\n  };\r\n\r\n  handleDialogClose = () => {\r\n    this.setState({ shouldOpenSelectParentPopup: false });\r\n  };\r\n\r\n  //   handleSelectParent = (itemParent) => {\r\n  //     this.setState({\r\n  //       category: {\r\n  //         ...this.state.category,\r\n  //         parent: itemParent,\r\n  //       },\r\n  //     });\r\n  //     this.setState({ shouldOpenSelectParentPopup: false });\r\n  //   };\r\n\r\n  handleFormSubmit = () => {\r\n    const { t } = this.props;\r\n    const { title, descriptions } = this.state.videoList;\r\n    let formData = new FormData();\r\n    formData.append(\"file\", this.state.file);\r\n    formData.append(\"title\", title);\r\n    formData.append(\"descriptions\", descriptions);\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n    if (this.state.videoList.id) {\r\n      updateVideo(this.state.videoList.id,formData,config)\r\n        .then(() => {\r\n          toast.success(t(\"general.updateSuccess\"));\r\n          this.props.handleOKDialog();\r\n        })\r\n        .catch(() => {\r\n          toast.error(t(\"general.error\"));\r\n          this.props.handleClose();\r\n        });\r\n    } else {\r\n      addVideo(formData, config)\r\n        .then(({ data }) => {\r\n          toast.success(t(\"general.addSuccess\"));\r\n          this.props.handleOKDialog();\r\n          this.setState({\r\n            ...this.state.videoList,\r\n          });\r\n        })\r\n        .catch(() => {\r\n          toast.error(t(\"general.error\"));\r\n          this.props.handleClose();\r\n        });\r\n    }\r\n  };\r\n\r\n  handleUploadFile = (e) => {\r\n    var fileUrl = window.URL.createObjectURL(e.target.files[0]);\r\n    this.setState({\r\n      file: e.target.files[0],\r\n      videoUrl: fileUrl,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { open, handleClose, t } = this.props;\r\n    const { videoUrl } = this.state;\r\n    const { id, title, descriptions } = this.state.videoList;\r\n\r\n    return (\r\n      <Dialog\r\n        onClose={handleClose}\r\n        open={open}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n        PaperComponent={PaperComponent}\r\n      >\r\n        <DialogTitle>\r\n          {id ? t(\"update\") : t(\"add\")} {t(\"video.videoTitle\")}\r\n        </DialogTitle>\r\n\r\n        <ValidatorForm ref=\"form\" onSubmit={this.handleFormSubmit}>\r\n          <DialogContent dividers style={{ overflowX: \"hidden\" }}>\r\n            <Grid container spacing={4}>\r\n              <Grid item sm={12} xs={12}>\r\n                <TextValidator\r\n                  size=\"small\"\r\n                  className=\"w-100 mb-16\"\r\n                  label={t(\"video.title\")}\r\n                  onChange={this.handleChange}\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                  value={title || null}\r\n                />\r\n                <div\r\n                  className=\"mb-18\"\r\n                  style={{\r\n                    position: \"relative\",\r\n                    left: \"50%\",\r\n                  }}\r\n                >\r\n                  {videoUrl && (\r\n                    <span>\r\n                      <video\r\n                        controls\r\n                        className=\"x-center\"\r\n                        style={{\r\n                          objectFit: \"contain\",\r\n                          width: \"100%\",\r\n                          height: \"300px\",\r\n                        }}\r\n                        src={videoUrl}\r\n                      ></video>\r\n                    </span>\r\n                  )}\r\n                  {this.state.videoList.id && !videoUrl && (\r\n                    <span>\r\n                      <video\r\n                        controls\r\n                        src={\r\n                          ConstantList.API_ENPOINT +\r\n                          \"/public/api/video/downloadVideo/\" +\r\n                          this.state.videoList.id\r\n                        }\r\n                        className=\"x-center\"\r\n                        style={{\r\n                          objectFit: \"contain\",\r\n                          width: \"100%\",\r\n                          height: \"300px\",\r\n                        }}\r\n                      ></video>\r\n                    </span>\r\n                  )}\r\n                  {!videoUrl && !this.state.videoList.id && (\r\n                    <div\r\n                      className=\"x-center\"\r\n                      style={{\r\n                        border: \"1px solid black\",\r\n                        width: \"100%\",\r\n                        height: \"306px\",\r\n                      }}\r\n                    ></div>\r\n                  )}\r\n                  <label\r\n                    htmlFor=\"id\"\r\n                    style={{\r\n                      background: \"#ffcb89\",\r\n                      borderRadius: \"999px\",\r\n                      padding: \"7px 14px\",\r\n                      width: \"fit-content\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      cursor: \"pointer\",\r\n                      margin: \"30px 0\",\r\n                    }}\r\n                    onClick={this.upload}\r\n                    className=\"x-center\"\r\n                  >\r\n                    <CloudUpload className=\"mr-10\" />\r\n                    Tải lên video\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"id\"\r\n                    name=\"id\"\r\n                    accept=\"video/*\"\r\n                    onChange={this.handleUploadFile}\r\n                    style={{ display: \"none\" }}\r\n                  />\r\n                </div>\r\n                <TextValidator\r\n                  size=\"small\"\r\n                  className=\"w-100 mb-16\"\r\n                  label={t(\"video.description\")}\r\n                  onChange={this.handleChange}\r\n                  type=\"text\"\r\n                  name=\"descriptions\"\r\n                  value={descriptions || null}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </DialogContent>\r\n\r\n          <DialogActions>\r\n            <div className=\"flex flex-end flex-middle\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                className=\"mr-12\"\r\n                startIcon={<Block />}\r\n                onClick={() => this.props.handleClose()}\r\n              >\r\n                {t(\"Cancel\")}\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                className=\"mr-8\"\r\n                startIcon={<Save />}\r\n                color=\"primary\"\r\n                type=\"submit\"\r\n              >\r\n                {t(\"Save\")}\r\n              </Button>\r\n            </div>\r\n          </DialogActions>\r\n        </ValidatorForm>\r\n\r\n        {/* {this.state.shouldOpenSelectParentPopup && (\r\n          <SelectParentPopup\r\n            open={this.state.shouldOpenSelectParentPopup}\r\n            handleSelect={this.handleSelectParent}\r\n            selectedItem={parent !== null ? parent : {}}\r\n            handleClose={this.handleDialogClose}\r\n            itemId={this.state.category?.id}\r\n            t={t}\r\n          />\r\n        )} */}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoListDialog;\r\n"]},"metadata":{},"sourceType":"module"}