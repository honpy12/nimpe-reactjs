{"ast":null,"code":"import _objectSpread from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\OceanTech\\\\nimpe\\\\Client-V2\\\\src\\\\app\\\\views\\\\Re-DengueLocation\\\\DengueGoogleMap.jsx\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport React, { Component } from \"react\";\nimport ReactMapGL, { Marker, NavigationControl, Popup, GeolocateControl } from \"react-map-gl\";\nimport Geolocation from \"./geolocate.svg\";\nimport { getAddressDetail } from \"./Re-DengueLocationServices\";\nimport Loading from \"../Component/Loading/SquareLoading\";\nvar MAPBOX_TOKEN = \"pk.eyJ1IjoibWVvMTIzIiwiYSI6ImNrdTI2MTQzZzBoNzMyd3FrNWVpc3U1YjEifQ.zj-vYL4EgQI83LzH8w8n6g\";\nvar geoControlStyle = {\n  position: \"absolute\",\n  top: 100,\n  right: 10\n};\n\nvar DengueMapComponent = /*#__PURE__*/function (_Component) {\n  _inherits(DengueMapComponent, _Component);\n\n  var _super = _createSuper(DengueMapComponent);\n\n  function DengueMapComponent(props) {\n    var _this;\n\n    _classCallCheck(this, DengueMapComponent);\n\n    _this = _super.call(this, props);\n\n    _this.onMapClick = function (e) {\n      _this.setState({\n        longitude: e.lngLat[0],\n        latitude: e.lngLat[1],\n        gMapX: e.center.x,\n        gMapY: e.center.y,\n        showAddressDetail: true\n      }, function () {\n        return getAddressDetail(e.lngLat).then(function (_ref) {\n          var _data$features$0$plac, _data$features$;\n\n          var data = _ref.data;\n          return _this.setState({\n            itemAddress: (_data$features$0$plac = (_data$features$ = data.features[0]) === null || _data$features$ === void 0 ? void 0 : _data$features$.place_name_vi) !== null && _data$features$0$plac !== void 0 ? _data$features$0$plac : \"\"\n          });\n        }).then(function () {\n          return _this.props.onGetLocation(_this.state);\n        });\n      });\n    };\n\n    _this.onHandleDrag = function (e) {\n      _this.setState({\n        longitude: e.lngLat[0],\n        latitude: e.lngLat[1],\n        gMapX: e.center.x,\n        gMapY: e.center.y,\n        showAddressDetail: true\n      }, function () {\n        getAddressDetail(e.lngLat).then(function (_ref2) {\n          var _data$features$0$plac2, _data$features$2;\n\n          var data = _ref2.data;\n          return _this.setState({\n            itemAddress: (_data$features$0$plac2 = (_data$features$2 = data.features[0]) === null || _data$features$2 === void 0 ? void 0 : _data$features$2.place_name_vi) !== null && _data$features$0$plac2 !== void 0 ? _data$features$0$plac2 : \"\"\n          });\n        }).then(function () {\n          return _this.props.onGetLocation(_this.state);\n        });\n      });\n    };\n\n    _this.onMarkerClick = function () {\n      _this.setState({\n        showPopup: true\n      });\n    };\n\n    _this.onClosePopup = function () {\n      _this.setState({\n        showPopup: false\n      });\n    };\n\n    _this.state = {\n      viewport: {\n        longitude: 105.7933994,\n        latitude: 21.0282951,\n        zoom: 15\n      },\n      longitude: 105.7926785,\n      latitude: 21.0283643,\n      showPopup: false,\n      item: null,\n      itemAddress: \"\",\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(DengueMapComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$item,\n          _this2 = this;\n\n      if ((_this$props$item = this.props.item) === null || _this$props$item === void 0 ? void 0 : _this$props$item.longitude) {\n        var _this$props$item2 = this.props.item,\n            longitude = _this$props$item2.longitude,\n            latitude = _this$props$item2.latitude;\n        this.setState({\n          viewport: _objectSpread(_objectSpread({}, this.state.viewport), {}, {\n            longitude: Number.parseFloat(longitude),\n            latitude: Number.parseFloat(latitude)\n          }),\n          longitude: Number.parseFloat(longitude),\n          latitude: Number.parseFloat(latitude)\n        });\n      } else {\n        window.navigator.geolocation.getCurrentPosition(function (_ref3) {\n          var coords = _ref3.coords;\n\n          _this2.setState({\n            viewport: {\n              longitude: coords.longitude,\n              latitude: coords.latitude,\n              zoom: 16\n            },\n            longitude: coords.longitude,\n            latitude: coords.latitude\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          longitude = _this$state.longitude,\n          latitude = _this$state.latitude,\n          viewport = _this$state.viewport,\n          showPopup = _this$state.showPopup,\n          loading = _this$state.loading;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"50%\",\n          height: \"600px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 4\n        }\n      }, loading && /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(ReactMapGL, Object.assign({}, viewport, {\n        width: \"100%\",\n        height: \"100%\",\n        mapStyle: \"mapbox://styles/mapbox/streets-v11\",\n        mapboxApiAccessToken: MAPBOX_TOKEN,\n        onViewportChange: function onViewportChange(viewport) {\n          return _this3.setState({\n            viewport: viewport\n          });\n        },\n        attributionControl: false,\n        onClick: this.onMapClick,\n        onLoad: function onLoad() {\n          return _this3.setState({\n            loading: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(NavigationControl, {\n        style: {\n          top: 10,\n          right: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(GeolocateControl, {\n        positionOptions: {\n          enableHighAccuracy: true\n        },\n        trackUserLocation: true,\n        auto: true,\n        style: geoControlStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 6\n        }\n      }), this.props.item.longitude !== \"\" && /*#__PURE__*/React.createElement(Marker, {\n        longitude: longitude,\n        latitude: latitude,\n        onDragEnd: this.onHandleDrag,\n        draggable: true,\n        offsetLeft: -20,\n        offsetTop: -10,\n        onClick: this.onMarkerClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: Geolocation,\n        alt: \"icon my location\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 8\n        }\n      })), showPopup && /*#__PURE__*/React.createElement(Popup, {\n        longitude: longitude,\n        latitude: latitude,\n        closeButton: true,\n        closeOnClick: true,\n        onClose: this.onClosePopup,\n        anchor: \"bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 8\n        }\n      }, \"Lat: \", latitude, \", Lng: \", longitude))));\n    }\n  }]);\n\n  return DengueMapComponent;\n}(Component);\n\nexport default DengueMapComponent;","map":{"version":3,"sources":["D:/OceanTech/nimpe/Client-V2/src/app/views/Re-DengueLocation/DengueGoogleMap.jsx"],"names":["React","Component","ReactMapGL","Marker","NavigationControl","Popup","GeolocateControl","getAddressDetail","Loading","MAPBOX_TOKEN","geoControlStyle","position","top","right","DengueMapComponent","props","onMapClick","e","setState","longitude","lngLat","latitude","gMapX","center","x","gMapY","y","showAddressDetail","then","data","itemAddress","features","place_name_vi","onGetLocation","state","onHandleDrag","onMarkerClick","showPopup","onClosePopup","viewport","zoom","item","loading","Number","parseFloat","window","navigator","geolocation","getCurrentPosition","coords","width","height","enableHighAccuracy","Geolocation"],"mappings":"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","sourcesContent":["import \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport React, { Component } from \"react\";\r\nimport ReactMapGL, {\r\n\tMarker,\r\n\tNavigationControl,\r\n\tPopup,\r\n\tGeolocateControl,\r\n} from \"react-map-gl\";\r\nimport Geolocation from \"./geolocate.svg\";\r\nimport { getAddressDetail } from \"./Re-DengueLocationServices\";\r\nimport Loading from \"../Component/Loading/SquareLoading\";\r\n\r\nconst MAPBOX_TOKEN =\r\n\t\"pk.eyJ1IjoibWVvMTIzIiwiYSI6ImNrdTI2MTQzZzBoNzMyd3FrNWVpc3U1YjEifQ.zj-vYL4EgQI83LzH8w8n6g\";\r\n\r\nconst geoControlStyle = {\r\n\tposition: \"absolute\",\r\n\ttop: 100,\r\n\tright: 10,\r\n};\r\n\r\nclass DengueMapComponent extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tviewport: {\r\n\t\t\t\tlongitude: 105.7933994,\r\n\t\t\t\tlatitude: 21.0282951,\r\n\t\t\t\tzoom: 15,\r\n\t\t\t},\r\n\t\t\tlongitude: 105.7926785,\r\n\t\t\tlatitude: 21.0283643,\r\n\t\t\tshowPopup: false,\r\n\t\t\titem: null,\r\n\t\t\titemAddress: \"\",\r\n\t\t\tloading: true,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.item?.longitude) {\r\n\t\t\tconst { longitude, latitude } = this.props.item;\r\n\t\t\tthis.setState({\r\n\t\t\t\tviewport: {\r\n\t\t\t\t\t...this.state.viewport,\r\n\t\t\t\t\tlongitude: Number.parseFloat(longitude),\r\n\t\t\t\t\tlatitude: Number.parseFloat(latitude),\r\n\t\t\t\t},\r\n\t\t\t\tlongitude: Number.parseFloat(longitude),\r\n\t\t\t\tlatitude: Number.parseFloat(latitude),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\twindow.navigator.geolocation.getCurrentPosition(({ coords }) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tviewport: {\r\n\t\t\t\t\t\tlongitude: coords.longitude,\r\n\t\t\t\t\t\tlatitude: coords.latitude,\r\n\t\t\t\t\t\tzoom: 16,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlongitude: coords.longitude,\r\n\t\t\t\t\tlatitude: coords.latitude,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMapClick = e => {\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tlongitude: e.lngLat[0],\r\n\t\t\t\tlatitude: e.lngLat[1],\r\n\t\t\t\tgMapX: e.center.x,\r\n\t\t\t\tgMapY: e.center.y,\r\n\t\t\t\tshowAddressDetail: true,\r\n\t\t\t},\r\n\t\t\t() =>\r\n\t\t\t\tgetAddressDetail(e.lngLat)\r\n\t\t\t\t\t.then(({ data }) =>\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\titemAddress: data.features[0]?.place_name_vi ?? \"\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then(() => this.props.onGetLocation(this.state))\r\n\t\t);\r\n\t};\r\n\r\n\tonHandleDrag = e => {\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tlongitude: e.lngLat[0],\r\n\t\t\t\tlatitude: e.lngLat[1],\r\n\t\t\t\tgMapX: e.center.x,\r\n\t\t\t\tgMapY: e.center.y,\r\n\t\t\t\tshowAddressDetail: true,\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tgetAddressDetail(e.lngLat)\r\n\t\t\t\t\t.then(({ data }) =>\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\titemAddress: data.features[0]?.place_name_vi ?? \"\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then(() => this.props.onGetLocation(this.state));\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tonMarkerClick = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowPopup: true,\r\n\t\t});\r\n\t};\r\n\r\n\tonClosePopup = () => {\r\n\t\tthis.setState({ showPopup: false });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { longitude, latitude, viewport, showPopup, loading } =\r\n\t\t\tthis.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ width: \"50%\", height: \"600px\" }}>\r\n\t\t\t\t{loading && <Loading />}\r\n\t\t\t\t<ReactMapGL\r\n\t\t\t\t\t{...viewport}\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\tmapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n\t\t\t\t\tmapboxApiAccessToken={MAPBOX_TOKEN}\r\n\t\t\t\t\tonViewportChange={viewport => this.setState({ viewport })}\r\n\t\t\t\t\tattributionControl={false}\r\n\t\t\t\t\tonClick={this.onMapClick}\r\n\t\t\t\t\tonLoad={() => this.setState({ loading: false })}\r\n\t\t\t\t>\r\n\t\t\t\t\t<NavigationControl\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: 10,\r\n\t\t\t\t\t\t\tright: 10,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<GeolocateControl\r\n\t\t\t\t\t\tpositionOptions={{ enableHighAccuracy: true }}\r\n\t\t\t\t\t\ttrackUserLocation={true}\r\n\t\t\t\t\t\tauto\r\n\t\t\t\t\t\tstyle={geoControlStyle}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{this.props.item.longitude !== \"\" && (\r\n\t\t\t\t\t\t<Marker\r\n\t\t\t\t\t\t\tlongitude={longitude}\r\n\t\t\t\t\t\t\tlatitude={latitude}\r\n\t\t\t\t\t\t\tonDragEnd={this.onHandleDrag}\r\n\t\t\t\t\t\t\tdraggable\r\n\t\t\t\t\t\t\toffsetLeft={-20}\r\n\t\t\t\t\t\t\toffsetTop={-10}\r\n\t\t\t\t\t\t\tonClick={this.onMarkerClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img src={Geolocation} alt=\"icon my location\" />\r\n\t\t\t\t\t\t</Marker>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{showPopup && (\r\n\t\t\t\t\t\t<Popup\r\n\t\t\t\t\t\t\tlongitude={longitude}\r\n\t\t\t\t\t\t\tlatitude={latitude}\r\n\t\t\t\t\t\t\tcloseButton={true}\r\n\t\t\t\t\t\t\tcloseOnClick={true}\r\n\t\t\t\t\t\t\tonClose={this.onClosePopup}\r\n\t\t\t\t\t\t\tanchor=\"bottom\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t\t\tLat: {latitude}, Lng: {longitude}\r\n\t\t\t\t\t\t\t</strong>\r\n\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ReactMapGL>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DengueMapComponent;\r\n"]},"metadata":{},"sourceType":"module"}